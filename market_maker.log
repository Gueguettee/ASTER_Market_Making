2025-10-01 09:57:45,517 - root - INFO - Starting market maker with arguments: Namespace(symbol='ASTERUSDT')
2025-10-01 09:57:45,518 - root - INFO - FLIP_MODE is set to: False
2025-10-01 09:57:45,522 - root - INFO - Sending initial cancel all orders for ASTERUSDT to ensure a clean slate.
2025-10-01 09:57:45,953 - root - INFO - Fetching initial account balance...
2025-10-01 09:57:45,954 - InitialBalance - INFO - Fetching initial account balance...
2025-10-01 09:57:46,265 - InitialBalance - INFO - Initial USDF balance: 0.0
2025-10-01 09:57:46,266 - InitialBalance - INFO - Initial USDT balance: 0.0
2025-10-01 09:57:46,266 - InitialBalance - INFO - Initial USDC balance: 100.0
2025-10-01 09:57:46,267 - InitialBalance - INFO - Initial balance loaded: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 09:57:46,270 - SupertrendInitializer - INFO - Initial Supertrend signal confirms default bias: FLIP_MODE -> False
2025-10-01 09:57:46,270 - root - INFO - Checking for existing position for ASTERUSDT...
2025-10-01 09:57:46,571 - root - INFO - No significant existing position found.
2025-10-01 09:57:46,572 - root - INFO - Attempting to set leverage for ASTERUSDT to 1x.
2025-10-01 09:57:47,327 - root - INFO - Successfully set leverage for ASTERUSDT to 1x.
2025-10-01 09:57:47,328 - root - INFO - Starting in default BUY mode.
2025-10-01 09:57:47,328 - MarketMakerLoop - INFO - Fetching trading rules for ASTERUSDT...
2025-10-01 09:57:47,329 - WebSocketPriceUpdater - INFO - Connecting to WebSocket: wss://fstream.asterdex.com/ws/asterusdt@depth5
2025-10-01 09:57:47,333 - UserDataUpdater - INFO - Getting listen key for user data stream...
2025-10-01 09:57:47,769 - UserDataUpdater - INFO - User data listen key obtained: yyNiP3fhVs8SglQI3WeJ...
2025-10-01 09:57:47,770 - UserDataUpdater - INFO - Connecting to user data WebSocket: wss://fstream.asterdex.com/ws/yyNiP3fhVs8SglQI3WeJPdQLila2BMfDLcSAkA7nMt4gFpvCiuVdV5aRtzGz7tUP
2025-10-01 09:57:48,108 - MarketMakerLoop - INFO - Filters loaded: {'price_precision': 4, 'tick_size': 0.0001, 'quantity_precision': 2, 'step_size': 0.01, 'min_notional': 5.0}
2025-10-01 09:57:48,109 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=False, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 09:57:48,574 - WebSocketPriceUpdater - INFO - WebSocket connected for ASTERUSDT depth stream
2025-10-01 09:57:48,897 - UserDataUpdater - INFO - User data WebSocket connected!
2025-10-01 09:57:50,151 - SpreadLoader - INFO - No Avellaneda parameter file found for ASTERUSDT; using default spreads buy=0.006000, sell=0.006000
2025-10-01 09:57:50,151 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 09:57:50,151 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=11.59991880, price=1.71380510, reduce_only=False
2025-10-01 09:57:50,152 - MarketMakerLoop - INFO - Adjusted order: price=1.7138, quantity=11.59
2025-10-01 09:57:50,152 - MarketMakerLoop - INFO - Placing BUY order: 11.59 ASTERUSDT @ 1.7138 (-0.6003% from mid-price)
2025-10-01 09:57:50,152 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.7138, quantity=11.59, side=BUY, reduceOnly=False
2025-10-01 09:57:50,459 - MarketMakerLoop - ERROR - Failed to place order: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
2025-10-01 09:57:50,460 - MarketMakerLoop - ERROR - Order parameters: symbol=ASTERUSDT, price=1.7138, quantity=11.59, side=BUY, reduceOnly=False
2025-10-01 09:57:50,460 - MarketMakerLoop - ERROR - An error occurred in the main loop: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
Traceback (most recent call last):
  File "/app/market_maker.py", line 977, in market_making_loop
    active_order = await client.place_order(args.symbol, formatted_price, formatted_quantity, side, reduce_only)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/api_client.py", line 137, in place_order
    response.raise_for_status()
  File "/usr/local/lib/python3.12/site-packages/aiohttp/client_reqrep.py", line 629, in raise_for_status
    raise ClientResponseError(
aiohttp.client_exceptions.ClientResponseError: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
2025-10-01 09:57:50,469 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 09:57:50,470 - MarketMakerLoop - ERROR - Market data: mid_price=1.7241, bid=1.724, ask=1.7242
2025-10-01 09:57:50,470 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 09:58:23,633 - root - INFO - Starting market maker with arguments: Namespace(symbol='ASTERUSDT')
2025-10-01 09:58:23,633 - root - INFO - FLIP_MODE is set to: False
2025-10-01 09:58:23,637 - root - INFO - Sending initial cancel all orders for ASTERUSDT to ensure a clean slate.
2025-10-01 09:58:24,067 - root - WARNING - Failed to send initial cancel all orders, proceeding anyway: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/allOpenOrders'
2025-10-01 09:58:24,068 - root - INFO - Fetching initial account balance...
2025-10-01 09:58:24,068 - InitialBalance - INFO - Fetching initial account balance...
2025-10-01 09:58:24,363 - InitialBalance - INFO - Initial USDF balance: 0.0
2025-10-01 09:58:24,364 - InitialBalance - INFO - Initial USDT balance: 0.0
2025-10-01 09:58:24,364 - InitialBalance - INFO - Initial USDC balance: 100.0
2025-10-01 09:58:24,364 - InitialBalance - INFO - Initial balance loaded: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 09:58:24,371 - SupertrendInitializer - INFO - Initial Supertrend signal confirms default bias: FLIP_MODE -> False
2025-10-01 09:58:24,371 - root - INFO - Checking for existing position for ASTERUSDT...
2025-10-01 09:58:25,137 - root - INFO - No significant existing position found.
2025-10-01 09:58:25,138 - root - INFO - Attempting to set leverage for ASTERUSDT to 1x.
2025-10-01 09:58:25,432 - root - ERROR - Failed to set leverage: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/leverage'
Traceback (most recent call last):
  File "/app/market_maker.py", line 1249, in main
    await client.change_leverage(args.symbol, DEFAULT_LEVERAGE)
  File "/app/api_client.py", line 312, in change_leverage
    response.raise_for_status()
  File "/usr/local/lib/python3.12/site-packages/aiohttp/client_reqrep.py", line 629, in raise_for_status
    raise ClientResponseError(
aiohttp.client_exceptions.ClientResponseError: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/leverage'
2025-10-01 09:58:25,439 - root - INFO - Starting in default BUY mode.
2025-10-01 09:58:25,440 - MarketMakerLoop - INFO - Fetching trading rules for ASTERUSDT...
2025-10-01 09:58:25,440 - WebSocketPriceUpdater - INFO - Connecting to WebSocket: wss://fstream.asterdex.com/ws/asterusdt@depth5
2025-10-01 09:58:25,444 - UserDataUpdater - INFO - Getting listen key for user data stream...
2025-10-01 09:58:25,852 - UserDataUpdater - INFO - User data listen key obtained: yyNiP3fhVs8SglQI3WeJ...
2025-10-01 09:58:25,853 - UserDataUpdater - INFO - Connecting to user data WebSocket: wss://fstream.asterdex.com/ws/yyNiP3fhVs8SglQI3WeJPdQLila2BMfDLcSAkA7nMt4gFpvCiuVdV5aRtzGz7tUP
2025-10-01 09:58:26,200 - MarketMakerLoop - INFO - Filters loaded: {'price_precision': 4, 'tick_size': 0.0001, 'quantity_precision': 2, 'step_size': 0.01, 'min_notional': 5.0}
2025-10-01 09:58:26,200 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=False, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 09:58:26,670 - WebSocketPriceUpdater - INFO - WebSocket connected for ASTERUSDT depth stream
2025-10-01 09:58:26,962 - UserDataUpdater - INFO - User data WebSocket connected!
2025-10-01 09:58:27,816 - SpreadLoader - INFO - No Avellaneda parameter file found for ASTERUSDT; using default spreads buy=0.006000, sell=0.006000
2025-10-01 09:58:27,816 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 09:58:27,817 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=11.67644569, price=1.70257290, reduce_only=False
2025-10-01 09:58:27,817 - MarketMakerLoop - INFO - Adjusted order: price=1.7026, quantity=11.67
2025-10-01 09:58:27,817 - MarketMakerLoop - INFO - Placing BUY order: 11.67 ASTERUSDT @ 1.7026 (-0.5984% from mid-price)
2025-10-01 09:58:27,818 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.7026, quantity=11.67, side=BUY, reduceOnly=False
2025-10-01 09:58:28,112 - MarketMakerLoop - ERROR - Failed to place order: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
2025-10-01 09:58:28,113 - MarketMakerLoop - ERROR - Order parameters: symbol=ASTERUSDT, price=1.7026, quantity=11.67, side=BUY, reduceOnly=False
2025-10-01 09:58:28,113 - MarketMakerLoop - ERROR - An error occurred in the main loop: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
Traceback (most recent call last):
  File "/app/market_maker.py", line 977, in market_making_loop
    active_order = await client.place_order(args.symbol, formatted_price, formatted_quantity, side, reduce_only)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/api_client.py", line 137, in place_order
    response.raise_for_status()
  File "/usr/local/lib/python3.12/site-packages/aiohttp/client_reqrep.py", line 629, in raise_for_status
    raise ClientResponseError(
aiohttp.client_exceptions.ClientResponseError: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
2025-10-01 09:58:28,117 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 09:58:28,117 - MarketMakerLoop - ERROR - Market data: mid_price=1.71285, bid=1.7128, ask=1.7129
2025-10-01 09:58:28,117 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 09:58:57,716 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 09:58:57,717 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=11.66078769, price=1.70485910, reduce_only=False
2025-10-01 09:58:57,717 - MarketMakerLoop - INFO - Adjusted order: price=1.7049, quantity=11.66
2025-10-01 09:58:57,718 - MarketMakerLoop - INFO - Placing BUY order: 11.66 ASTERUSDT @ 1.7049 (-0.5976% from mid-price)
2025-10-01 09:58:57,718 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.7049, quantity=11.66, side=BUY, reduceOnly=False
2025-10-01 09:58:57,997 - MarketMakerLoop - ERROR - Failed to place order: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
2025-10-01 09:58:57,998 - MarketMakerLoop - ERROR - Order parameters: symbol=ASTERUSDT, price=1.7049, quantity=11.66, side=BUY, reduceOnly=False
2025-10-01 09:58:57,998 - MarketMakerLoop - ERROR - An error occurred in the main loop: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
Traceback (most recent call last):
  File "/app/market_maker.py", line 977, in market_making_loop
    active_order = await client.place_order(args.symbol, formatted_price, formatted_quantity, side, reduce_only)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/api_client.py", line 137, in place_order
    response.raise_for_status()
  File "/usr/local/lib/python3.12/site-packages/aiohttp/client_reqrep.py", line 629, in raise_for_status
    raise ClientResponseError(
aiohttp.client_exceptions.ClientResponseError: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
2025-10-01 09:58:57,999 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 09:58:58,000 - MarketMakerLoop - ERROR - Market data: mid_price=1.7150500000000002, bid=1.7149, ask=1.7152
2025-10-01 09:58:58,000 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 10:01:08,174 - root - INFO - Starting market maker with arguments: Namespace(symbol='ASTERUSDT')
2025-10-01 10:01:08,174 - root - INFO - FLIP_MODE is set to: False
2025-10-01 10:01:08,178 - root - INFO - Sending initial cancel all orders for ASTERUSDT to ensure a clean slate.
2025-10-01 10:01:08,624 - root - INFO - Fetching initial account balance...
2025-10-01 10:01:08,625 - InitialBalance - INFO - Fetching initial account balance...
2025-10-01 10:01:08,933 - InitialBalance - INFO - Initial USDF balance: 0.0
2025-10-01 10:01:08,933 - InitialBalance - INFO - Initial USDT balance: 0.0
2025-10-01 10:01:08,934 - InitialBalance - INFO - Initial USDC balance: 100.0
2025-10-01 10:01:08,934 - InitialBalance - INFO - Initial balance loaded: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 10:01:08,937 - SupertrendInitializer - INFO - Initial Supertrend signal confirms default bias: FLIP_MODE -> False
2025-10-01 10:01:08,937 - root - INFO - Checking for existing position for ASTERUSDT...
2025-10-01 10:01:09,684 - root - INFO - No significant existing position found.
2025-10-01 10:01:09,685 - root - INFO - Attempting to set leverage for ASTERUSDT to 1x.
2025-10-01 10:01:10,445 - root - INFO - Successfully set leverage for ASTERUSDT to 1x.
2025-10-01 10:01:10,445 - root - INFO - Starting in default BUY mode.
2025-10-01 10:01:10,446 - MarketMakerLoop - INFO - Fetching trading rules for ASTERUSDT...
2025-10-01 10:01:10,446 - WebSocketPriceUpdater - INFO - Connecting to WebSocket: wss://fstream.asterdex.com/ws/asterusdt@depth5
2025-10-01 10:01:10,449 - UserDataUpdater - INFO - Getting listen key for user data stream...
2025-10-01 10:01:10,865 - UserDataUpdater - INFO - User data listen key obtained: yyNiP3fhVs8SglQI3WeJ...
2025-10-01 10:01:10,865 - UserDataUpdater - INFO - Connecting to user data WebSocket: wss://fstream.asterdex.com/ws/yyNiP3fhVs8SglQI3WeJPdQLila2BMfDLcSAkA7nMt4gFpvCiuVdV5aRtzGz7tUP
2025-10-01 10:01:11,212 - MarketMakerLoop - INFO - Filters loaded: {'price_precision': 4, 'tick_size': 0.0001, 'quantity_precision': 2, 'step_size': 0.01, 'min_notional': 5.0}
2025-10-01 10:01:11,212 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=False, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 10:01:11,692 - WebSocketPriceUpdater - INFO - WebSocket connected for ASTERUSDT depth stream
2025-10-01 10:01:12,008 - UserDataUpdater - INFO - User data WebSocket connected!
2025-10-01 10:01:12,827 - SpreadLoader - INFO - No Avellaneda parameter file found for ASTERUSDT; using default spreads buy=0.006000, sell=0.006000
2025-10-01 10:01:12,827 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 10:01:12,827 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=11.56838361, price=1.71847690, reduce_only=False
2025-10-01 10:01:12,828 - MarketMakerLoop - INFO - Adjusted order: price=1.7185, quantity=11.56
2025-10-01 10:01:12,828 - MarketMakerLoop - INFO - Placing BUY order: 11.56 ASTERUSDT @ 1.7185 (-0.5987% from mid-price)
2025-10-01 10:01:12,828 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.7185, quantity=11.56, side=BUY, reduceOnly=False
2025-10-01 10:01:13,575 - MarketMakerLoop - ERROR - Failed to place order: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
2025-10-01 10:01:13,576 - MarketMakerLoop - ERROR - Order parameters: symbol=ASTERUSDT, price=1.7185, quantity=11.56, side=BUY, reduceOnly=False
2025-10-01 10:01:13,576 - MarketMakerLoop - ERROR - An error occurred in the main loop: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
Traceback (most recent call last):
  File "/app/market_maker.py", line 977, in market_making_loop
    active_order = await client.place_order(args.symbol, formatted_price, formatted_quantity, side, reduce_only)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/api_client.py", line 137, in place_order
    response.raise_for_status()
  File "/usr/local/lib/python3.12/site-packages/aiohttp/client_reqrep.py", line 629, in raise_for_status
    raise ClientResponseError(
aiohttp.client_exceptions.ClientResponseError: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
2025-10-01 10:01:13,584 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 10:01:13,585 - MarketMakerLoop - ERROR - Market data: mid_price=1.7287, bid=1.7286, ask=1.7288
2025-10-01 10:01:13,585 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 10:01:42,925 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 10:01:42,925 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=11.57373919, price=1.71768170, reduce_only=False
2025-10-01 10:01:42,926 - MarketMakerLoop - INFO - Adjusted order: price=1.7177, quantity=11.57
2025-10-01 10:01:42,926 - MarketMakerLoop - INFO - Placing BUY order: 11.57 ASTERUSDT @ 1.7177 (-0.5989% from mid-price)
2025-10-01 10:01:42,926 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.7177, quantity=11.57, side=BUY, reduceOnly=False
2025-10-01 10:01:43,676 - MarketMakerLoop - ERROR - Failed to place order: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
2025-10-01 10:01:43,676 - MarketMakerLoop - ERROR - Order parameters: symbol=ASTERUSDT, price=1.7177, quantity=11.57, side=BUY, reduceOnly=False
2025-10-01 10:01:43,677 - MarketMakerLoop - ERROR - An error occurred in the main loop: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
Traceback (most recent call last):
  File "/app/market_maker.py", line 977, in market_making_loop
    active_order = await client.place_order(args.symbol, formatted_price, formatted_quantity, side, reduce_only)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/api_client.py", line 137, in place_order
    response.raise_for_status()
  File "/usr/local/lib/python3.12/site-packages/aiohttp/client_reqrep.py", line 629, in raise_for_status
    raise ClientResponseError(
aiohttp.client_exceptions.ClientResponseError: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
2025-10-01 10:01:43,679 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 10:01:43,679 - MarketMakerLoop - ERROR - Market data: mid_price=1.7279499999999999, bid=1.7279, ask=1.728
2025-10-01 10:01:43,680 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 10:02:08,146 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 10:02:08,147 - PriceReporter - INFO - ASTERUSDT | Mid-Price: $1.7248 | Bid-Ask Spread: 0.006% | Bid: $1.7247 | Ask: $1.7248 | Balance: $100.00
2025-10-01 10:02:09,705 - UserDataUpdater - WARNING - No user data messages received for 60.0s. Connection may be stale. Reconnecting...
2025-10-01 10:02:09,994 - BalanceKeepalive - INFO - Balance keepalive task cancelled.
2025-10-01 10:02:09,995 - BalanceKeepalive - INFO - Balance keepalive task shutting down
2025-10-01 10:02:09,995 - UserDataUpdater - INFO - Reconnecting to user data WebSocket in 5.0s...
2025-10-01 10:02:12,357 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 10:02:13,358 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 10:02:13,673 - UserDataUpdater - INFO - Getting listen key for user data stream...
2025-10-01 10:02:14,188 - UserDataUpdater - INFO - User data listen key obtained: yyNiP3fhVs8SglQI3WeJ...
2025-10-01 10:02:14,189 - UserDataUpdater - INFO - Connecting to user data WebSocket: wss://fstream.asterdex.com/ws/yyNiP3fhVs8SglQI3WeJPdQLila2BMfDLcSAkA7nMt4gFpvCiuVdV5aRtzGz7tUP
2025-10-01 10:02:14,360 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 10:02:15,361 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 10:02:15,474 - UserDataUpdater - INFO - User data WebSocket connected!
2025-10-01 10:02:17,404 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 10:02:17,404 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=11.58647858, price=1.71579310, reduce_only=False
2025-10-01 10:02:17,405 - MarketMakerLoop - INFO - Adjusted order: price=1.7158, quantity=11.58
2025-10-01 10:02:17,405 - MarketMakerLoop - INFO - Placing BUY order: 11.58 ASTERUSDT @ 1.7158 (-0.5996% from mid-price)
2025-10-01 10:02:17,405 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.7158, quantity=11.58, side=BUY, reduceOnly=False
2025-10-01 10:02:18,168 - MarketMakerLoop - ERROR - Failed to place order: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
2025-10-01 10:02:18,169 - MarketMakerLoop - ERROR - Order parameters: symbol=ASTERUSDT, price=1.7158, quantity=11.58, side=BUY, reduceOnly=False
2025-10-01 10:02:18,169 - MarketMakerLoop - ERROR - An error occurred in the main loop: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
Traceback (most recent call last):
  File "/app/market_maker.py", line 977, in market_making_loop
    active_order = await client.place_order(args.symbol, formatted_price, formatted_quantity, side, reduce_only)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/api_client.py", line 137, in place_order
    response.raise_for_status()
  File "/usr/local/lib/python3.12/site-packages/aiohttp/client_reqrep.py", line 629, in raise_for_status
    raise ClientResponseError(
aiohttp.client_exceptions.ClientResponseError: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
2025-10-01 10:02:18,191 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 10:02:18,192 - MarketMakerLoop - ERROR - Market data: mid_price=1.7262, bid=1.7261, ask=1.7263
2025-10-01 10:02:18,192 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 10:05:06,896 - root - INFO - Starting market maker with arguments: Namespace(symbol='ASTERUSDT')
2025-10-01 10:05:06,897 - root - INFO - FLIP_MODE is set to: False
2025-10-01 10:05:06,900 - root - INFO - Sending initial cancel all orders for ASTERUSDT to ensure a clean slate.
2025-10-01 10:05:07,362 - root - INFO - Fetching initial account balance...
2025-10-01 10:05:07,363 - InitialBalance - INFO - Fetching initial account balance...
2025-10-01 10:05:08,136 - InitialBalance - INFO - Initial USDF balance: 0.0
2025-10-01 10:05:08,137 - InitialBalance - INFO - Initial USDT balance: 0.0
2025-10-01 10:05:08,137 - InitialBalance - INFO - Initial USDC balance: 100.0
2025-10-01 10:05:08,137 - InitialBalance - INFO - Initial balance loaded: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 10:05:08,141 - SupertrendInitializer - INFO - Initial Supertrend signal confirms default bias: FLIP_MODE -> False
2025-10-01 10:05:08,142 - root - INFO - Checking for existing position for ASTERUSDT...
2025-10-01 10:05:08,443 - root - INFO - No significant existing position found.
2025-10-01 10:05:08,444 - root - INFO - Attempting to set leverage for ASTERUSDT to 1x.
2025-10-01 10:05:08,728 - root - INFO - Successfully set leverage for ASTERUSDT to 1x.
2025-10-01 10:05:08,728 - root - INFO - Starting in default BUY mode.
2025-10-01 10:05:08,729 - MarketMakerLoop - INFO - Fetching trading rules for ASTERUSDT...
2025-10-01 10:05:08,729 - WebSocketPriceUpdater - INFO - Connecting to WebSocket: wss://fstream.asterdex.com/ws/asterusdt@depth5
2025-10-01 10:05:08,733 - UserDataUpdater - INFO - Getting listen key for user data stream...
2025-10-01 10:05:09,149 - UserDataUpdater - INFO - User data listen key obtained: yyNiP3fhVs8SglQI3WeJ...
2025-10-01 10:05:09,150 - UserDataUpdater - INFO - Connecting to user data WebSocket: wss://fstream.asterdex.com/ws/yyNiP3fhVs8SglQI3WeJPdQLila2BMfDLcSAkA7nMt4gFpvCiuVdV5aRtzGz7tUP
2025-10-01 10:05:09,475 - MarketMakerLoop - INFO - Filters loaded: {'price_precision': 4, 'tick_size': 0.0001, 'quantity_precision': 2, 'step_size': 0.01, 'min_notional': 5.0}
2025-10-01 10:05:09,475 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=False, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 10:05:09,989 - WebSocketPriceUpdater - INFO - WebSocket connected for ASTERUSDT depth stream
2025-10-01 10:05:10,273 - UserDataUpdater - INFO - User data WebSocket connected!
2025-10-01 10:05:11,064 - SpreadLoader - INFO - No Avellaneda parameter file found for ASTERUSDT; using default spreads buy=0.006000, sell=0.006000
2025-10-01 10:05:11,065 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 10:05:11,066 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=11.65670989, price=1.70545550, reduce_only=False
2025-10-01 10:05:11,067 - MarketMakerLoop - INFO - Adjusted order: price=1.7055, quantity=11.65
2025-10-01 10:05:11,067 - MarketMakerLoop - INFO - Placing BUY order: 11.65 ASTERUSDT @ 1.7055 (-0.5974% from mid-price)
2025-10-01 10:05:11,067 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.7055, quantity=11.65, side=BUY, reduceOnly=False
2025-10-01 10:05:11,377 - MarketMakerLoop - ERROR - Failed to place order: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
2025-10-01 10:05:11,378 - MarketMakerLoop - ERROR - Order parameters: symbol=ASTERUSDT, price=1.7055, quantity=11.65, side=BUY, reduceOnly=False
2025-10-01 10:05:11,378 - MarketMakerLoop - ERROR - An error occurred in the main loop: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
Traceback (most recent call last):
  File "/app/market_maker.py", line 977, in market_making_loop
    active_order = await client.place_order(args.symbol, formatted_price, formatted_quantity, side, reduce_only)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/api_client.py", line 137, in place_order
    response.raise_for_status()
  File "/usr/local/lib/python3.12/site-packages/aiohttp/client_reqrep.py", line 629, in raise_for_status
    raise ClientResponseError(
aiohttp.client_exceptions.ClientResponseError: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
2025-10-01 10:05:11,386 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 10:05:11,386 - MarketMakerLoop - ERROR - Market data: mid_price=1.7157499999999999, bid=1.7157, ask=1.7158
2025-10-01 10:05:11,386 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 10:51:57,002 - root - INFO - Starting market maker with arguments: Namespace(symbol='ASTERUSDT')
2025-10-01 10:51:57,003 - root - INFO - FLIP_MODE is set to: False
2025-10-01 10:51:57,009 - root - INFO - Sending initial cancel all orders for ASTERUSDT to ensure a clean slate.
2025-10-01 10:51:57,481 - root - INFO - Fetching initial account balance...
2025-10-01 10:51:57,481 - InitialBalance - INFO - Fetching initial account balance...
2025-10-01 10:51:58,295 - InitialBalance - INFO - Initial USDF balance: 0.0
2025-10-01 10:51:58,296 - InitialBalance - INFO - Initial USDT balance: 0.0
2025-10-01 10:51:58,297 - InitialBalance - INFO - Initial USDC balance: 100.0
2025-10-01 10:51:58,297 - InitialBalance - INFO - Initial balance loaded: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 10:51:58,302 - SupertrendInitializer - INFO - Initial Supertrend signal confirms default bias: FLIP_MODE -> False
2025-10-01 10:51:58,303 - root - INFO - Checking for existing position for ASTERUSDT...
2025-10-01 10:51:58,641 - root - INFO - No significant existing position found.
2025-10-01 10:51:58,642 - root - INFO - Attempting to set leverage for ASTERUSDT to 1x.
2025-10-01 10:51:58,948 - root - INFO - Successfully set leverage for ASTERUSDT to 1x.
2025-10-01 10:51:58,949 - root - INFO - Starting in default BUY mode.
2025-10-01 10:51:58,950 - MarketMakerLoop - INFO - Fetching trading rules for ASTERUSDT...
2025-10-01 10:51:58,951 - WebSocketPriceUpdater - INFO - Connecting to WebSocket: wss://fstream.asterdex.com/ws/asterusdt@depth5
2025-10-01 10:51:58,960 - UserDataUpdater - INFO - Getting listen key for user data stream...
2025-10-01 10:51:59,383 - UserDataUpdater - INFO - User data listen key obtained: yyNiP3fhVs8SglQI3WeJ...
2025-10-01 10:51:59,384 - UserDataUpdater - INFO - Connecting to user data WebSocket: wss://fstream.asterdex.com/ws/yyNiP3fhVs8SglQI3WeJPdQLila2BMfDLcSAkA7nMt4gFpvCiuVdV5aRtzGz7tUP
2025-10-01 10:51:59,728 - MarketMakerLoop - INFO - Filters loaded: {'price_precision': 4, 'tick_size': 0.0001, 'quantity_precision': 2, 'step_size': 0.01, 'min_notional': 5.0}
2025-10-01 10:51:59,729 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=False, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 10:52:00,253 - WebSocketPriceUpdater - INFO - WebSocket connected for ASTERUSDT depth stream
2025-10-01 10:52:00,519 - UserDataUpdater - INFO - User data WebSocket connected!
2025-10-01 10:52:01,798 - SpreadLoader - INFO - No Avellaneda parameter file found for ASTERUSDT; using default spreads buy=0.006000, sell=0.006000
2025-10-01 10:52:01,798 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 10:52:01,799 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=11.74501571, price=1.69263290, reduce_only=False
2025-10-01 10:52:01,800 - MarketMakerLoop - INFO - Adjusted order: price=1.6926, quantity=11.74
2025-10-01 10:52:01,801 - MarketMakerLoop - INFO - Placing BUY order: 11.74 ASTERUSDT @ 1.6926 (-0.6019% from mid-price)
2025-10-01 10:52:01,801 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.6926, quantity=11.74, side=BUY, reduceOnly=False
2025-10-01 10:52:02,116 - MarketMakerLoop - ERROR - Client response error placing order: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
2025-10-01 10:52:02,117 - MarketMakerLoop - ERROR - An error occurred in the main loop: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
Traceback (most recent call last):
  File "/app/market_maker.py", line 990, in market_making_loop
    raise cre
  File "/app/market_maker.py", line 977, in market_making_loop
    active_order = await client.place_order(args.symbol, formatted_price, formatted_quantity, side, reduce_only)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/api_client.py", line 137, in place_order
    response.raise_for_status()
  File "/usr/local/lib/python3.12/site-packages/aiohttp/client_reqrep.py", line 629, in raise_for_status
    raise ClientResponseError(
aiohttp.client_exceptions.ClientResponseError: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
2025-10-01 10:52:02,129 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 10:52:02,130 - MarketMakerLoop - ERROR - Market data: mid_price=1.7028, bid=1.7027, ask=1.7029
2025-10-01 10:52:02,130 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 10:52:31,773 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 10:52:31,774 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=11.71680483, price=1.69670830, reduce_only=False
2025-10-01 10:52:31,774 - MarketMakerLoop - INFO - Adjusted order: price=1.6967, quantity=11.71
2025-10-01 10:52:31,775 - MarketMakerLoop - INFO - Placing BUY order: 11.71 ASTERUSDT @ 1.6967 (-0.6005% from mid-price)
2025-10-01 10:52:31,775 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.6967, quantity=11.71, side=BUY, reduceOnly=False
2025-10-01 10:52:32,550 - MarketMakerLoop - ERROR - Client response error placing order: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
2025-10-01 10:52:32,551 - MarketMakerLoop - ERROR - An error occurred in the main loop: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
Traceback (most recent call last):
  File "/app/market_maker.py", line 990, in market_making_loop
    raise cre
  File "/app/market_maker.py", line 977, in market_making_loop
    active_order = await client.place_order(args.symbol, formatted_price, formatted_quantity, side, reduce_only)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/api_client.py", line 137, in place_order
    response.raise_for_status()
  File "/usr/local/lib/python3.12/site-packages/aiohttp/client_reqrep.py", line 629, in raise_for_status
    raise ClientResponseError(
aiohttp.client_exceptions.ClientResponseError: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
2025-10-01 10:52:32,556 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 10:52:32,557 - MarketMakerLoop - ERROR - Market data: mid_price=1.7067, bid=1.7066, ask=1.7068
2025-10-01 10:52:32,558 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 10:52:55,905 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 10:52:55,906 - PriceReporter - INFO - ASTERUSDT | Mid-Price: $1.7040 | Bid-Ask Spread: 0.012% | Bid: $1.7039 | Ask: $1.7041 | Balance: $100.00
2025-10-01 10:52:57,465 - UserDataUpdater - WARNING - No user data messages received for 60.0s. Connection may be stale. Reconnecting...
2025-10-01 10:52:57,752 - BalanceKeepalive - INFO - Balance keepalive task cancelled.
2025-10-01 10:52:57,752 - BalanceKeepalive - INFO - Balance keepalive task shutting down
2025-10-01 10:52:57,753 - UserDataUpdater - INFO - Reconnecting to user data WebSocket in 5.0s...
2025-10-01 10:53:01,064 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 10:53:02,066 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 10:53:02,755 - UserDataUpdater - INFO - Getting listen key for user data stream...
2025-10-01 10:53:03,068 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 10:53:03,235 - UserDataUpdater - INFO - User data listen key obtained: yyNiP3fhVs8SglQI3WeJ...
2025-10-01 10:53:03,236 - UserDataUpdater - INFO - Connecting to user data WebSocket: wss://fstream.asterdex.com/ws/yyNiP3fhVs8SglQI3WeJPdQLila2BMfDLcSAkA7nMt4gFpvCiuVdV5aRtzGz7tUP
2025-10-01 10:53:04,070 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 10:53:04,576 - UserDataUpdater - INFO - User data WebSocket connected!
2025-10-01 10:53:06,632 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 10:53:06,633 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=11.70172308, price=1.69889510, reduce_only=False
2025-10-01 10:53:06,633 - MarketMakerLoop - INFO - Adjusted order: price=1.6989, quantity=11.70
2025-10-01 10:53:06,634 - MarketMakerLoop - INFO - Placing BUY order: 11.70 ASTERUSDT @ 1.6989 (-0.5997% from mid-price)
2025-10-01 10:53:06,635 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.6989, quantity=11.70, side=BUY, reduceOnly=False
2025-10-01 10:53:07,414 - MarketMakerLoop - ERROR - Client response error placing order: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
2025-10-01 10:53:07,415 - MarketMakerLoop - ERROR - An error occurred in the main loop: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
Traceback (most recent call last):
  File "/app/market_maker.py", line 990, in market_making_loop
    raise cre
  File "/app/market_maker.py", line 977, in market_making_loop
    active_order = await client.place_order(args.symbol, formatted_price, formatted_quantity, side, reduce_only)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/api_client.py", line 137, in place_order
  File "/usr/local/lib/python3.12/site-packages/aiohttp/client_reqrep.py", line 629, in raise_for_status
    raise ClientResponseError(
aiohttp.client_exceptions.ClientResponseError: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
2025-10-01 10:53:07,447 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 10:53:07,447 - MarketMakerLoop - ERROR - Market data: mid_price=1.70925, bid=1.7092, ask=1.7093
2025-10-01 10:53:07,448 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 10:53:37,090 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 10:53:37,091 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=11.66622918, price=1.70406390, reduce_only=False
2025-10-01 10:53:37,092 - MarketMakerLoop - INFO - Adjusted order: price=1.7041, quantity=11.66
2025-10-01 10:53:37,092 - MarketMakerLoop - INFO - Placing BUY order: 11.66 ASTERUSDT @ 1.7041 (-0.5979% from mid-price)
2025-10-01 10:53:37,093 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.7041, quantity=11.66, side=BUY, reduceOnly=False
2025-10-01 10:53:37,389 - MarketMakerLoop - ERROR - Client response error placing order: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
2025-10-01 10:53:37,390 - MarketMakerLoop - ERROR - An error occurred in the main loop: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
Traceback (most recent call last):
  File "/app/market_maker.py", line 990, in market_making_loop
    raise cre
  File "/app/market_maker.py", line 977, in market_making_loop
    active_order = await client.place_order(args.symbol, formatted_price, formatted_quantity, side, reduce_only)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/api_client.py", line 137, in place_order
    raise Exception(f"{await response.text()}")
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/aiohttp/client_reqrep.py", line 629, in raise_for_status
    raise ClientResponseError(
aiohttp.client_exceptions.ClientResponseError: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
2025-10-01 10:53:37,429 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 10:53:37,430 - MarketMakerLoop - ERROR - Market data: mid_price=1.7149, bid=1.7147, ask=1.7151
2025-10-01 10:53:37,431 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 10:53:52,790 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 10:53:52,791 - PriceReporter - INFO - ASTERUSDT | Mid-Price: $1.7146 | Bid-Ask Spread: 0.006% | Bid: $1.7146 | Ask: $1.7147 | Balance: $100.00
2025-10-01 10:54:13,995 - root - INFO - Starting market maker with arguments: Namespace(symbol='ASTERUSDT')
2025-10-01 10:54:13,995 - root - INFO - FLIP_MODE is set to: False
2025-10-01 10:54:14,000 - root - INFO - Sending initial cancel all orders for ASTERUSDT to ensure a clean slate.
2025-10-01 10:54:14,918 - root - INFO - Fetching initial account balance...
2025-10-01 10:54:14,919 - InitialBalance - INFO - Fetching initial account balance...
2025-10-01 10:54:15,718 - InitialBalance - INFO - Initial USDF balance: 0.0
2025-10-01 10:54:15,718 - InitialBalance - INFO - Initial USDT balance: 0.0
2025-10-01 10:54:15,719 - InitialBalance - INFO - Initial USDC balance: 100.0
2025-10-01 10:54:15,720 - InitialBalance - INFO - Initial balance loaded: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 10:54:15,727 - SupertrendInitializer - INFO - Initial Supertrend signal confirms default bias: FLIP_MODE -> False
2025-10-01 10:54:15,727 - root - INFO - Checking for existing position for ASTERUSDT...
2025-10-01 10:54:16,504 - root - INFO - No significant existing position found.
2025-10-01 10:54:16,505 - root - INFO - Attempting to set leverage for ASTERUSDT to 1x.
2025-10-01 10:54:17,267 - root - INFO - Successfully set leverage for ASTERUSDT to 1x.
2025-10-01 10:54:17,268 - root - INFO - Starting in default BUY mode.
2025-10-01 10:54:17,269 - MarketMakerLoop - INFO - Fetching trading rules for ASTERUSDT...
2025-10-01 10:54:17,270 - WebSocketPriceUpdater - INFO - Connecting to WebSocket: wss://fstream.asterdex.com/ws/asterusdt@depth5
2025-10-01 10:54:17,280 - UserDataUpdater - INFO - Getting listen key for user data stream...
2025-10-01 10:54:17,699 - UserDataUpdater - INFO - User data listen key obtained: yyNiP3fhVs8SglQI3WeJ...
2025-10-01 10:54:17,699 - UserDataUpdater - INFO - Connecting to user data WebSocket: wss://fstream.asterdex.com/ws/yyNiP3fhVs8SglQI3WeJPdQLila2BMfDLcSAkA7nMt4gFpvCiuVdV5aRtzGz7tUP
2025-10-01 10:54:18,038 - MarketMakerLoop - INFO - Filters loaded: {'price_precision': 4, 'tick_size': 0.0001, 'quantity_precision': 2, 'step_size': 0.01, 'min_notional': 5.0}
2025-10-01 10:54:18,039 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=False, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 10:54:18,554 - WebSocketPriceUpdater - INFO - WebSocket connected for ASTERUSDT depth stream
2025-10-01 10:54:18,888 - UserDataUpdater - INFO - User data WebSocket connected!
2025-10-01 10:54:19,653 - SpreadLoader - INFO - No Avellaneda parameter file found for ASTERUSDT; using default spreads buy=0.006000, sell=0.006000
2025-10-01 10:54:19,654 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 10:54:19,654 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=11.70720286, price=1.69809990, reduce_only=False
2025-10-01 10:54:19,655 - MarketMakerLoop - INFO - Adjusted order: price=1.6981, quantity=11.70
2025-10-01 10:54:19,656 - MarketMakerLoop - INFO - Placing BUY order: 11.70 ASTERUSDT @ 1.6981 (-0.6000% from mid-price)
2025-10-01 10:54:19,656 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.6981, quantity=11.70, side=BUY, reduceOnly=False
2025-10-01 10:54:20,430 - MarketMakerLoop - ERROR - Client response error placing order: {"code":-4061,"msg":"Order's position side does not match user's setting."}
2025-10-01 10:54:20,431 - MarketMakerLoop - ERROR - An error occurred in the main loop: {"code":-4061,"msg":"Order's position side does not match user's setting."}
Traceback (most recent call last):
  File "/app/market_maker.py", line 990, in market_making_loop
    raise cre
  File "/app/market_maker.py", line 977, in market_making_loop
    active_order = await client.place_order(args.symbol, formatted_price, formatted_quantity, side, reduce_only)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/api_client.py", line 137, in place_order
    raise Exception(f"{await response.text()}")
Exception: {"code":-4061,"msg":"Order's position side does not match user's setting."}
2025-10-01 10:54:20,449 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 10:54:20,450 - MarketMakerLoop - ERROR - Market data: mid_price=1.70825, bid=1.7082, ask=1.7083
2025-10-01 10:54:20,450 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 10:57:05,303 - root - INFO - Starting market maker with arguments: Namespace(symbol='ASTERUSDT')
2025-10-01 10:57:05,304 - root - INFO - FLIP_MODE is set to: False
2025-10-01 10:57:05,311 - root - INFO - Sending initial cancel all orders for ASTERUSDT to ensure a clean slate.
2025-10-01 10:57:05,785 - root - INFO - Fetching initial account balance...
2025-10-01 10:57:05,786 - InitialBalance - INFO - Fetching initial account balance...
2025-10-01 10:57:06,576 - InitialBalance - INFO - Initial USDF balance: 0.0
2025-10-01 10:57:06,577 - InitialBalance - INFO - Initial USDT balance: 0.0
2025-10-01 10:57:06,578 - InitialBalance - INFO - Initial USDC balance: 100.0
2025-10-01 10:57:06,579 - InitialBalance - INFO - Initial balance loaded: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 10:57:06,584 - SupertrendInitializer - INFO - Initial Supertrend signal confirms default bias: FLIP_MODE -> False
2025-10-01 10:57:06,585 - root - INFO - Checking for existing position for ASTERUSDT...
2025-10-01 10:57:07,349 - root - INFO - No significant existing position found.
2025-10-01 10:57:07,350 - root - INFO - Attempting to set leverage for ASTERUSDT to 1x.
2025-10-01 10:57:08,119 - root - INFO - Successfully set leverage for ASTERUSDT to 1x.
2025-10-01 10:57:08,120 - root - INFO - Starting in default BUY mode.
2025-10-01 10:57:08,121 - MarketMakerLoop - INFO - Fetching trading rules for ASTERUSDT...
2025-10-01 10:57:08,122 - WebSocketPriceUpdater - INFO - Connecting to WebSocket: wss://fstream.asterdex.com/ws/asterusdt@depth5
2025-10-01 10:57:08,131 - UserDataUpdater - INFO - Getting listen key for user data stream...
2025-10-01 10:57:08,539 - UserDataUpdater - INFO - User data listen key obtained: yyNiP3fhVs8SglQI3WeJ...
2025-10-01 10:57:08,539 - UserDataUpdater - INFO - Connecting to user data WebSocket: wss://fstream.asterdex.com/ws/yyNiP3fhVs8SglQI3WeJPdQLila2BMfDLcSAkA7nMt4gFpvCiuVdV5aRtzGz7tUP
2025-10-01 10:57:08,886 - MarketMakerLoop - INFO - Filters loaded: {'price_precision': 4, 'tick_size': 0.0001, 'quantity_precision': 2, 'step_size': 0.01, 'min_notional': 5.0}
2025-10-01 10:57:08,887 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=False, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 10:57:09,449 - WebSocketPriceUpdater - INFO - WebSocket connected for ASTERUSDT depth stream
2025-10-01 10:57:09,728 - UserDataUpdater - INFO - User data WebSocket connected!
2025-10-01 10:57:10,519 - SpreadLoader - INFO - No Avellaneda parameter file found for ASTERUSDT; using default spreads buy=0.006000, sell=0.006000
2025-10-01 10:57:10,520 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 10:57:10,520 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=11.76816711, price=1.68930300, reduce_only=False
2025-10-01 10:57:10,522 - MarketMakerLoop - INFO - Adjusted order: price=1.6893, quantity=11.76
2025-10-01 10:57:10,522 - MarketMakerLoop - INFO - Placing BUY order: 11.76 ASTERUSDT @ 1.6893 (-0.6002% from mid-price)
2025-10-01 10:57:10,523 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.6893, quantity=11.76, side=BUY, reduceOnly=False
2025-10-01 10:57:10,839 - MarketMakerLoop - ERROR - Client response error placing order: Order placement failed: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order', Response body: {"code":-4061,"msg":"Order's position side does not match user's setting."}, Request params: {'symbol': 'ASTERUSDT', 'side': 'BUY', 'type': 'LIMIT', 'timeInForce': 'GTX', 'price': '1.6893', 'quantity': '11.76', 'positionSide': 'BOTH'}, Signed params: {'symbol': 'ASTERUSDT', 'side': 'BUY', 'type': 'LIMIT', 'timeInForce': 'GTX', 'price': '1.6893', 'quantity': '11.76', 'positionSide': 'BOTH', 'recvWindow': '50000', 'timestamp': '1759316230524', 'nonce': 1759316230524016, 'user': '0xa5FC94C67b1247f070C40F8FDDBBaB652eCD1A8D', 'signer': '0xBb88159BA977Cc3A88a8e7616bDd8a903583F58F', 'signature': '0x022bad2f136ade34bcfe5b547e68b3966e7c82a47ebf85b83990dc8242c2af564ffa376922a79db2d93764a85ba2d042783141d530a93cb561cb0c49b5a697d91c'}
2025-10-01 10:57:10,839 - MarketMakerLoop - ERROR - An error occurred in the main loop: Order placement failed: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order', Response body: {"code":-4061,"msg":"Order's position side does not match user's setting."}, Request params: {'symbol': 'ASTERUSDT', 'side': 'BUY', 'type': 'LIMIT', 'timeInForce': 'GTX', 'price': '1.6893', 'quantity': '11.76', 'positionSide': 'BOTH'}, Signed params: {'symbol': 'ASTERUSDT', 'side': 'BUY', 'type': 'LIMIT', 'timeInForce': 'GTX', 'price': '1.6893', 'quantity': '11.76', 'positionSide': 'BOTH', 'recvWindow': '50000', 'timestamp': '1759316230524', 'nonce': 1759316230524016, 'user': '0xa5FC94C67b1247f070C40F8FDDBBaB652eCD1A8D', 'signer': '0xBb88159BA977Cc3A88a8e7616bDd8a903583F58F', 'signature': '0x022bad2f136ade34bcfe5b547e68b3966e7c82a47ebf85b83990dc8242c2af564ffa376922a79db2d93764a85ba2d042783141d530a93cb561cb0c49b5a697d91c'}
Traceback (most recent call last):
  File "/app/api_client.py", line 138, in place_order
    response.raise_for_status()
  File "/usr/local/lib/python3.12/site-packages/aiohttp/client_reqrep.py", line 629, in raise_for_status
    raise ClientResponseError(
aiohttp.client_exceptions.ClientResponseError: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/market_maker.py", line 990, in market_making_loop
    raise cre
  File "/app/market_maker.py", line 977, in market_making_loop
    active_order = await client.place_order(args.symbol, formatted_price, formatted_quantity, side, reduce_only)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/api_client.py", line 140, in place_order
    raise Exception(f"Order placement failed: {e}, Response body: {await response.text()}, Request params: {params}, Signed params: {signed_params}")
Exception: Order placement failed: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order', Response body: {"code":-4061,"msg":"Order's position side does not match user's setting."}, Request params: {'symbol': 'ASTERUSDT', 'side': 'BUY', 'type': 'LIMIT', 'timeInForce': 'GTX', 'price': '1.6893', 'quantity': '11.76', 'positionSide': 'BOTH'}, Signed params: {'symbol': 'ASTERUSDT', 'side': 'BUY', 'type': 'LIMIT', 'timeInForce': 'GTX', 'price': '1.6893', 'quantity': '11.76', 'positionSide': 'BOTH', 'recvWindow': '50000', 'timestamp': '1759316230524', 'nonce': 1759316230524016, 'user': '0xa5FC94C67b1247f070C40F8FDDBBaB652eCD1A8D', 'signer': '0xBb88159BA977Cc3A88a8e7616bDd8a903583F58F', 'signature': '0x022bad2f136ade34bcfe5b547e68b3966e7c82a47ebf85b83990dc8242c2af564ffa376922a79db2d93764a85ba2d042783141d530a93cb561cb0c49b5a697d91c'}
2025-10-01 10:57:10,856 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 10:57:10,856 - MarketMakerLoop - ERROR - Market data: mid_price=1.6995, bid=1.6994, ask=1.6996
2025-10-01 10:57:10,857 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 10:58:13,354 - root - INFO - Starting market maker with arguments: Namespace(symbol='ASTERUSDT')
2025-10-01 10:58:13,355 - root - INFO - FLIP_MODE is set to: False
2025-10-01 10:58:13,360 - root - INFO - Sending initial cancel all orders for ASTERUSDT to ensure a clean slate.
2025-10-01 10:58:13,814 - root - INFO - Fetching initial account balance...
2025-10-01 10:58:13,815 - InitialBalance - INFO - Fetching initial account balance...
2025-10-01 10:58:14,125 - InitialBalance - INFO - Initial USDF balance: 0.0
2025-10-01 10:58:14,126 - InitialBalance - INFO - Initial USDT balance: 0.0
2025-10-01 10:58:14,126 - InitialBalance - INFO - Initial USDC balance: 100.0
2025-10-01 10:58:14,127 - InitialBalance - INFO - Initial balance loaded: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 10:58:14,132 - SupertrendInitializer - INFO - Initial Supertrend signal confirms default bias: FLIP_MODE -> False
2025-10-01 10:58:14,132 - root - INFO - Checking for existing position for ASTERUSDT...
2025-10-01 10:58:14,457 - root - INFO - No significant existing position found.
2025-10-01 10:58:14,458 - root - INFO - Attempting to set leverage for ASTERUSDT to 1x.
2025-10-01 10:58:14,783 - root - INFO - Successfully set leverage for ASTERUSDT to 1x.
2025-10-01 10:58:14,784 - root - INFO - Starting in default BUY mode.
2025-10-01 10:58:14,785 - MarketMakerLoop - INFO - Fetching trading rules for ASTERUSDT...
2025-10-01 10:58:14,786 - WebSocketPriceUpdater - INFO - Connecting to WebSocket: wss://fstream.asterdex.com/ws/asterusdt@depth5
2025-10-01 10:58:14,794 - UserDataUpdater - INFO - Getting listen key for user data stream...
2025-10-01 10:58:15,407 - UserDataUpdater - INFO - User data listen key obtained: yyNiP3fhVs8SglQI3WeJ...
2025-10-01 10:58:15,408 - UserDataUpdater - INFO - Connecting to user data WebSocket: wss://fstream.asterdex.com/ws/yyNiP3fhVs8SglQI3WeJPdQLila2BMfDLcSAkA7nMt4gFpvCiuVdV5aRtzGz7tUP
2025-10-01 10:58:15,696 - MarketMakerLoop - INFO - Filters loaded: {'price_precision': 4, 'tick_size': 0.0001, 'quantity_precision': 2, 'step_size': 0.01, 'min_notional': 5.0}
2025-10-01 10:58:15,697 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=False, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 10:58:16,315 - WebSocketPriceUpdater - INFO - WebSocket connected for ASTERUSDT depth stream
2025-10-01 10:58:16,700 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 10:58:16,756 - UserDataUpdater - INFO - User data WebSocket connected!
2025-10-01 10:58:18,304 - SpreadLoader - INFO - No Avellaneda parameter file found for ASTERUSDT; using default spreads buy=0.006000, sell=0.006000
2025-10-01 10:58:18,305 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 10:58:18,306 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=11.79314818, price=1.68572460, reduce_only=False
2025-10-01 10:58:18,306 - MarketMakerLoop - INFO - Adjusted order: price=1.6857, quantity=11.79
2025-10-01 10:58:18,307 - MarketMakerLoop - INFO - Placing BUY order: 11.79 ASTERUSDT @ 1.6857 (-0.6015% from mid-price)
2025-10-01 10:58:18,307 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.6857, quantity=11.79, side=BUY, reduceOnly=False
2025-10-01 10:58:18,623 - MarketMakerLoop - INFO - Order placed successfully: ID=344548093
2025-10-01 10:58:47,058 - MarketMakerLoop - INFO - Order 344548093 not filled within 30s. Cancelling and refreshing.
2025-10-01 10:58:49,067 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 10:58:49,068 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=11.80358829, price=1.68423360, reduce_only=False
2025-10-01 10:58:49,068 - MarketMakerLoop - INFO - Adjusted order: price=1.6842, quantity=11.80
2025-10-01 10:58:49,069 - MarketMakerLoop - INFO - Placing BUY order: 11.80 ASTERUSDT @ 1.6842 (-0.6020% from mid-price)
2025-10-01 10:58:49,069 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.6842, quantity=11.80, side=BUY, reduceOnly=False
2025-10-01 10:58:49,837 - MarketMakerLoop - INFO - Order placed successfully: ID=344554408
2025-10-01 10:59:11,630 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 10:59:11,636 - PriceReporter - INFO - ASTERUSDT | Mid-Price: $1.6951 | Bid-Ask Spread: 0.006% | Bid: $1.6950 | Ask: $1.6951 | Balance: $100.00
2025-10-01 10:59:18,241 - MarketMakerLoop - INFO - Order 344554408 not filled within 30s. Cancelling and refreshing.
2025-10-01 10:59:18,246 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 10:59:18,246 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=11.78550383, price=1.68681800, reduce_only=False
2025-10-01 10:59:18,247 - MarketMakerLoop - INFO - Adjusted order: price=1.6868, quantity=11.78
2025-10-01 10:59:18,248 - MarketMakerLoop - INFO - Placing BUY order: 11.78 ASTERUSDT @ 1.6868 (-0.6011% from mid-price)
2025-10-01 10:59:18,249 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.6868, quantity=11.78, side=BUY, reduceOnly=False
2025-10-01 10:59:19,001 - MarketMakerLoop - INFO - Order placed successfully: ID=344561897
2025-10-01 10:59:47,359 - MarketMakerLoop - INFO - Order 344561897 not filled within 30s. Cancelling and refreshing.
2025-10-01 10:59:48,890 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 10:59:48,891 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=11.81788637, price=1.68219590, reduce_only=False
2025-10-01 10:59:48,892 - MarketMakerLoop - INFO - Adjusted order: price=1.6822, quantity=11.81
2025-10-01 10:59:48,892 - MarketMakerLoop - INFO - Placing BUY order: 11.81 ASTERUSDT @ 1.6822 (-0.5998% from mid-price)
2025-10-01 10:59:48,893 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.6822, quantity=11.81, side=BUY, reduceOnly=False
2025-10-01 10:59:49,669 - MarketMakerLoop - INFO - Order placed successfully: ID=344568043
2025-10-01 11:00:08,430 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:00:08,430 - PriceReporter - INFO - ASTERUSDT | Mid-Price: $1.6949 | Bid-Ask Spread: 0.006% | Bid: $1.6949 | Ask: $1.6950 | Balance: $100.00
2025-10-01 11:00:18,041 - MarketMakerLoop - INFO - Order 344568043 not filled within 30s. Cancelling and refreshing.
2025-10-01 11:00:20,165 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 11:00:20,166 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=11.81020993, price=1.68328930, reduce_only=False
2025-10-01 11:00:20,166 - MarketMakerLoop - INFO - Adjusted order: price=1.6833, quantity=11.81
2025-10-01 11:00:20,167 - MarketMakerLoop - INFO - Placing BUY order: 11.81 ASTERUSDT @ 1.6833 (-0.5994% from mid-price)
2025-10-01 11:00:20,167 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.6833, quantity=11.81, side=BUY, reduceOnly=False
2025-10-01 11:00:20,480 - MarketMakerLoop - INFO - Order placed successfully: ID=344575991
2025-10-01 11:00:48,841 - MarketMakerLoop - INFO - Order 344575991 not filled within 30s. Cancelling and refreshing.
2025-10-01 11:00:51,359 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 11:00:51,359 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=11.81858472, price=1.68209650, reduce_only=False
2025-10-01 11:00:51,360 - MarketMakerLoop - INFO - Adjusted order: price=1.6821, quantity=11.81
2025-10-01 11:00:51,361 - MarketMakerLoop - INFO - Placing BUY order: 11.81 ASTERUSDT @ 1.6821 (-0.5998% from mid-price)
2025-10-01 11:00:51,361 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.6821, quantity=11.81, side=BUY, reduceOnly=False
2025-10-01 11:00:51,676 - MarketMakerLoop - INFO - Order placed successfully: ID=344584473
2025-10-01 11:01:05,162 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:01:05,163 - PriceReporter - INFO - ASTERUSDT | Mid-Price: $1.6913 | Bid-Ask Spread: 0.006% | Bid: $1.6912 | Ask: $1.6913 | Balance: $100.00
2025-10-01 11:01:20,072 - MarketMakerLoop - INFO - Order 344584473 not filled within 30s. Cancelling and refreshing.
2025-10-01 11:01:21,691 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 11:01:21,692 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=11.84869220, price=1.67782230, reduce_only=False
2025-10-01 11:01:21,693 - MarketMakerLoop - INFO - Adjusted order: price=1.6778, quantity=11.84
2025-10-01 11:01:21,693 - MarketMakerLoop - INFO - Placing BUY order: 11.84 ASTERUSDT @ 1.6778 (-0.6013% from mid-price)
2025-10-01 11:01:21,694 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.6778, quantity=11.84, side=BUY, reduceOnly=False
2025-10-01 11:01:21,996 - MarketMakerLoop - INFO - Order placed successfully: ID=344592936
2025-10-01 11:01:50,350 - MarketMakerLoop - INFO - Order 344592936 not filled within 30s. Cancelling and refreshing.
2025-10-01 11:01:51,906 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 11:01:51,906 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=11.84027469, price=1.67901510, reduce_only=False
2025-10-01 11:01:51,907 - MarketMakerLoop - INFO - Adjusted order: price=1.6790, quantity=11.84
2025-10-01 11:01:51,907 - MarketMakerLoop - INFO - Placing BUY order: 11.84 ASTERUSDT @ 1.6790 (-0.6009% from mid-price)
2025-10-01 11:01:51,908 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.6790, quantity=11.84, side=BUY, reduceOnly=False
2025-10-01 11:01:52,689 - MarketMakerLoop - INFO - Order placed successfully: ID=344600648
2025-10-01 11:02:01,910 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:02:01,912 - PriceReporter - INFO - ASTERUSDT | Mid-Price: $1.6932 | Bid-Ask Spread: 0.006% | Bid: $1.6932 | Ask: $1.6933 | Balance: $100.00
2025-10-01 11:02:21,097 - MarketMakerLoop - INFO - Order 344600648 not filled within 30s. Cancelling and refreshing.
2025-10-01 11:02:22,719 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 11:02:22,719 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=11.82487362, price=1.68120190, reduce_only=False
2025-10-01 11:02:22,720 - MarketMakerLoop - INFO - Adjusted order: price=1.6812, quantity=11.82
2025-10-01 11:02:22,721 - MarketMakerLoop - INFO - Placing BUY order: 11.82 ASTERUSDT @ 1.6812 (-0.6001% from mid-price)
2025-10-01 11:02:22,721 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.6812, quantity=11.82, side=BUY, reduceOnly=False
2025-10-01 11:02:23,491 - MarketMakerLoop - INFO - Order placed successfully: ID=344609414
2025-10-01 11:02:51,790 - MarketMakerLoop - INFO - Order 344609414 not filled within 30s. Cancelling and refreshing.
2025-10-01 11:02:53,354 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 11:02:53,355 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=11.81020993, price=1.68328930, reduce_only=False
2025-10-01 11:02:53,355 - MarketMakerLoop - INFO - Adjusted order: price=1.6833, quantity=11.81
2025-10-01 11:02:53,356 - MarketMakerLoop - INFO - Placing BUY order: 11.81 ASTERUSDT @ 1.6833 (-0.5994% from mid-price)
2025-10-01 11:02:53,357 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.6833, quantity=11.81, side=BUY, reduceOnly=False
2025-10-01 11:02:54,128 - MarketMakerLoop - INFO - Order placed successfully: ID=344616987
2025-10-01 11:02:58,618 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:02:58,626 - PriceReporter - INFO - ASTERUSDT | Mid-Price: $1.6951 | Bid-Ask Spread: 0.006% | Bid: $1.6950 | Ask: $1.6951 | Balance: $100.00
2025-10-01 11:03:22,551 - MarketMakerLoop - INFO - Order 344616987 not filled within 30s. Cancelling and refreshing.
2025-10-01 11:03:24,133 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 11:03:24,134 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=11.79523473, price=1.68542640, reduce_only=False
2025-10-01 11:03:24,134 - MarketMakerLoop - INFO - Adjusted order: price=1.6854, quantity=11.79
2025-10-01 11:03:24,135 - MarketMakerLoop - INFO - Placing BUY order: 11.79 ASTERUSDT @ 1.6854 (-0.6016% from mid-price)
2025-10-01 11:03:24,135 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.6854, quantity=11.79, side=BUY, reduceOnly=False
2025-10-01 11:03:24,420 - MarketMakerLoop - INFO - Order placed successfully: ID=344625534
2025-10-01 11:03:52,720 - MarketMakerLoop - INFO - Order 344625534 not filled within 30s. Cancelling and refreshing.
2025-10-01 11:03:54,264 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 11:03:54,264 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=11.79210519, price=1.68587370, reduce_only=False
2025-10-01 11:03:54,265 - MarketMakerLoop - INFO - Adjusted order: price=1.6859, quantity=11.79
2025-10-01 11:03:54,267 - MarketMakerLoop - INFO - Placing BUY order: 11.79 ASTERUSDT @ 1.6859 (-0.5984% from mid-price)
2025-10-01 11:03:54,267 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.6859, quantity=11.79, side=BUY, reduceOnly=False
2025-10-01 11:03:55,038 - MarketMakerLoop - INFO - Order placed successfully: ID=344631438
2025-10-01 11:03:55,340 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:03:55,346 - PriceReporter - INFO - ASTERUSDT | Mid-Price: $1.6961 | Bid-Ask Spread: 0.006% | Bid: $1.6961 | Ask: $1.6962 | Balance: $100.00
2025-10-01 11:04:23,442 - MarketMakerLoop - INFO - Order 344631438 not filled within 30s. Cancelling and refreshing.
2025-10-01 11:04:25,549 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 11:04:25,550 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=11.75260761, price=1.69153950, reduce_only=False
2025-10-01 11:04:25,550 - MarketMakerLoop - INFO - Adjusted order: price=1.6915, quantity=11.75
2025-10-01 11:04:25,551 - MarketMakerLoop - INFO - Placing BUY order: 11.75 ASTERUSDT @ 1.6915 (-0.6023% from mid-price)
2025-10-01 11:04:25,551 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.6915, quantity=11.75, side=BUY, reduceOnly=False
2025-10-01 11:04:26,322 - MarketMakerLoop - INFO - Order placed successfully: ID=344641646
2025-10-01 11:04:52,088 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:04:52,094 - PriceReporter - INFO - ASTERUSDT | Mid-Price: $1.7029 | Bid-Ask Spread: 0.006% | Bid: $1.7029 | Ask: $1.7030 | Balance: $100.00
2025-10-01 11:04:54,669 - MarketMakerLoop - INFO - Order 344641646 not filled within 30s. Cancelling and refreshing.
2025-10-01 11:04:56,663 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 11:04:56,664 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=11.74743025, price=1.69228500, reduce_only=False
2025-10-01 11:04:56,665 - MarketMakerLoop - INFO - Adjusted order: price=1.6923, quantity=11.74
2025-10-01 11:04:56,665 - MarketMakerLoop - INFO - Placing BUY order: 11.74 ASTERUSDT @ 1.6923 (-0.5991% from mid-price)
2025-10-01 11:04:56,666 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.6923, quantity=11.74, side=BUY, reduceOnly=False
2025-10-01 11:04:57,442 - MarketMakerLoop - INFO - Order placed successfully: ID=344649315
2025-10-01 11:05:25,830 - MarketMakerLoop - INFO - Order 344649315 not filled within 30s. Cancelling and refreshing.
2025-10-01 11:05:27,872 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 11:05:27,873 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=11.73812249, price=1.69362690, reduce_only=False
2025-10-01 11:05:27,874 - MarketMakerLoop - INFO - Adjusted order: price=1.6936, quantity=11.73
2025-10-01 11:05:27,875 - MarketMakerLoop - INFO - Placing BUY order: 11.73 ASTERUSDT @ 1.6936 (-0.6016% from mid-price)
2025-10-01 11:05:27,875 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.6936, quantity=11.73, side=BUY, reduceOnly=False
2025-10-01 11:05:26,966 - MarketMakerLoop - INFO - Order placed successfully: ID=344655490
2025-10-01 11:05:48,810 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:05:48,815 - PriceReporter - INFO - ASTERUSDT | Mid-Price: $1.7024 | Bid-Ask Spread: 0.012% | Bid: $1.7023 | Ask: $1.7025 | Balance: $100.00
2025-10-01 11:05:55,356 - MarketMakerLoop - INFO - Order 344655490 not filled within 30s. Cancelling and refreshing.
2025-10-01 11:05:57,339 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 11:05:57,340 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=11.75122653, price=1.69173830, reduce_only=False
2025-10-01 11:05:57,340 - MarketMakerLoop - INFO - Adjusted order: price=1.6917, quantity=11.75
2025-10-01 11:05:57,341 - MarketMakerLoop - INFO - Placing BUY order: 11.75 ASTERUSDT @ 1.6917 (-0.6023% from mid-price)
2025-10-01 11:05:57,342 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.6917, quantity=11.75, side=BUY, reduceOnly=False
2025-10-01 11:05:58,108 - MarketMakerLoop - INFO - Order placed successfully: ID=344662093
2025-10-01 11:06:26,446 - MarketMakerLoop - INFO - Order 344662093 not filled within 30s. Cancelling and refreshing.
2025-10-01 11:06:28,045 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 11:06:28,046 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=11.73054928, price=1.69472030, reduce_only=False
2025-10-01 11:06:28,047 - MarketMakerLoop - INFO - Adjusted order: price=1.6947, quantity=11.73
2025-10-01 11:06:28,047 - MarketMakerLoop - INFO - Placing BUY order: 11.73 ASTERUSDT @ 1.6947 (-0.6012% from mid-price)
2025-10-01 11:06:28,048 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.6947, quantity=11.73, side=BUY, reduceOnly=False
2025-10-01 11:06:28,815 - MarketMakerLoop - INFO - Order placed successfully: ID=344669815
2025-10-01 11:07:06,091 - root - INFO - Starting market maker with arguments: Namespace(symbol='ASTERUSDT')
2025-10-01 11:07:06,092 - root - INFO - FLIP_MODE is set to: False
2025-10-01 11:07:06,100 - root - INFO - Sending initial cancel all orders for ASTERUSDT to ensure a clean slate.
2025-10-01 11:07:06,287 - root - INFO - Starting market maker with arguments: Namespace(symbol='ATOMUSDT')
2025-10-01 11:07:06,288 - root - INFO - FLIP_MODE is set to: False
2025-10-01 11:07:06,293 - root - INFO - Sending initial cancel all orders for ATOMUSDT to ensure a clean slate.
2025-10-01 11:07:06,323 - root - INFO - Starting market maker with arguments: Namespace(symbol='HYPEUSDT')
2025-10-01 11:07:06,323 - root - INFO - FLIP_MODE is set to: False
2025-10-01 11:07:06,328 - root - INFO - Sending initial cancel all orders for HYPEUSDT to ensure a clean slate.
2025-10-01 11:07:06,560 - root - INFO - Fetching initial account balance...
2025-10-01 11:07:06,560 - InitialBalance - INFO - Fetching initial account balance...
2025-10-01 11:07:07,212 - root - INFO - Fetching initial account balance...
2025-10-01 11:07:07,213 - InitialBalance - INFO - Fetching initial account balance...
2025-10-01 11:07:07,270 - root - INFO - Fetching initial account balance...
2025-10-01 11:07:07,272 - InitialBalance - INFO - Fetching initial account balance...
2025-10-01 11:07:07,350 - InitialBalance - INFO - Initial USDF balance: 0.0
2025-10-01 11:07:07,351 - InitialBalance - INFO - Initial USDT balance: 0.0
2025-10-01 11:07:07,351 - InitialBalance - INFO - Initial USDC balance: 100.0
2025-10-01 11:07:07,352 - InitialBalance - INFO - Initial balance loaded: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:07:07,357 - SupertrendInitializer - INFO - Initialized Supertrend signal to: DOWNTREND (-1)
2025-10-01 11:07:07,358 - SupertrendInitializer - INFO - Initial strategy bias set by signal: FLIP_MODE -> True
2025-10-01 11:07:07,360 - root - INFO - Checking for existing position for ASTERUSDT...
2025-10-01 11:07:07,543 - InitialBalance - INFO - Initial USDF balance: 0.0
2025-10-01 11:07:07,544 - InitialBalance - INFO - Initial USDT balance: 0.0
2025-10-01 11:07:07,545 - InitialBalance - INFO - Initial USDC balance: 100.0
2025-10-01 11:07:07,547 - InitialBalance - INFO - Initial balance loaded: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:07:07,550 - SupertrendInitializer - WARNING - Supertrend params file not found at /app/params/supertrend_params_ATOM.json. Using default FLIP_MODE=False.
2025-10-01 11:07:07,553 - root - INFO - Checking for existing position for ATOMUSDT...
2025-10-01 11:07:07,608 - InitialBalance - INFO - Initial USDF balance: 0.0
2025-10-01 11:07:07,609 - InitialBalance - INFO - Initial USDT balance: 0.0
2025-10-01 11:07:07,610 - InitialBalance - INFO - Initial USDC balance: 100.0
2025-10-01 11:07:07,610 - InitialBalance - INFO - Initial balance loaded: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:07:07,617 - SupertrendInitializer - INFO - Initial Supertrend signal confirms default bias: FLIP_MODE -> False
2025-10-01 11:07:07,618 - root - INFO - Checking for existing position for HYPEUSDT...
2025-10-01 11:07:07,919 - root - INFO - No significant existing position found.
2025-10-01 11:07:07,920 - root - INFO - Attempting to set leverage for HYPEUSDT to 1x.
2025-10-01 11:07:08,133 - root - INFO - No significant existing position found.
2025-10-01 11:07:08,134 - root - INFO - Attempting to set leverage for ASTERUSDT to 1x.
2025-10-01 11:07:08,327 - root - INFO - No significant existing position found.
2025-10-01 11:07:08,328 - root - INFO - Attempting to set leverage for ATOMUSDT to 1x.
2025-10-01 11:07:08,637 - root - INFO - Successfully set leverage for ATOMUSDT to 1x.
2025-10-01 11:07:08,638 - root - INFO - Starting in default BUY mode.
2025-10-01 11:07:08,639 - MarketMakerLoop - INFO - Fetching trading rules for ATOMUSDT...
2025-10-01 11:07:08,640 - WebSocketPriceUpdater - INFO - Connecting to WebSocket: wss://fstream.asterdex.com/ws/atomusdt@depth5
2025-10-01 11:07:08,647 - UserDataUpdater - INFO - Getting listen key for user data stream...
2025-10-01 11:07:08,649 - SupertrendUpdater - WARNING - Supertrend params file not found at /app/params/supertrend_params_ATOM.json. Defaulting to UPTREND (+1).
2025-10-01 11:07:08,684 - root - INFO - Successfully set leverage for HYPEUSDT to 1x.
2025-10-01 11:07:08,684 - root - INFO - Starting in default BUY mode.
2025-10-01 11:07:08,685 - MarketMakerLoop - INFO - Fetching trading rules for HYPEUSDT...
2025-10-01 11:07:08,687 - WebSocketPriceUpdater - INFO - Connecting to WebSocket: wss://fstream.asterdex.com/ws/hypeusdt@depth5
2025-10-01 11:07:08,693 - UserDataUpdater - INFO - Getting listen key for user data stream...
2025-10-01 11:07:08,908 - root - INFO - Successfully set leverage for ASTERUSDT to 1x.
2025-10-01 11:07:08,909 - root - INFO - Starting in default SELL mode.
2025-10-01 11:07:08,910 - MarketMakerLoop - INFO - Fetching trading rules for ASTERUSDT...
2025-10-01 11:07:08,911 - WebSocketPriceUpdater - INFO - Connecting to WebSocket: wss://fstream.asterdex.com/ws/asterusdt@depth5
2025-10-01 11:07:08,915 - UserDataUpdater - INFO - Getting listen key for user data stream...
2025-10-01 11:07:08,922 - SupertrendUpdater - INFO - Supertrend signal updated to: UPTREND (+1)
2025-10-01 11:07:09,083 - UserDataUpdater - INFO - User data listen key obtained: yyNiP3fhVs8SglQI3WeJ...
2025-10-01 11:07:09,084 - UserDataUpdater - INFO - Connecting to user data WebSocket: wss://fstream.asterdex.com/ws/yyNiP3fhVs8SglQI3WeJPdQLila2BMfDLcSAkA7nMt4gFpvCiuVdV5aRtzGz7tUP
2025-10-01 11:07:09,121 - UserDataUpdater - INFO - User data listen key obtained: yyNiP3fhVs8SglQI3WeJ...
2025-10-01 11:07:09,122 - UserDataUpdater - INFO - Connecting to user data WebSocket: wss://fstream.asterdex.com/ws/yyNiP3fhVs8SglQI3WeJPdQLila2BMfDLcSAkA7nMt4gFpvCiuVdV5aRtzGz7tUP
2025-10-01 11:07:09,323 - UserDataUpdater - INFO - User data listen key obtained: yyNiP3fhVs8SglQI3WeJ...
2025-10-01 11:07:09,323 - UserDataUpdater - INFO - Connecting to user data WebSocket: wss://fstream.asterdex.com/ws/yyNiP3fhVs8SglQI3WeJPdQLila2BMfDLcSAkA7nMt4gFpvCiuVdV5aRtzGz7tUP
2025-10-01 11:07:09,416 - MarketMakerLoop - INFO - Filters loaded: {'price_precision': 2, 'tick_size': 0.01, 'quantity_precision': 2, 'step_size': 0.01, 'min_notional': 5.0}
2025-10-01 11:07:09,417 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=False, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:07:09,464 - MarketMakerLoop - INFO - Filters loaded: {'price_precision': 3, 'tick_size': 0.001, 'quantity_precision': 2, 'step_size': 0.01, 'min_notional': 5.0}
2025-10-01 11:07:09,465 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=False, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:07:09,687 - MarketMakerLoop - INFO - Filters loaded: {'price_precision': 4, 'tick_size': 0.0001, 'quantity_precision': 2, 'step_size': 0.01, 'min_notional': 5.0}
2025-10-01 11:07:09,688 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=False, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:07:09,941 - WebSocketPriceUpdater - INFO - WebSocket connected for ATOMUSDT depth stream
2025-10-01 11:07:09,968 - WebSocketPriceUpdater - INFO - WebSocket connected for HYPEUSDT depth stream
2025-10-01 11:07:10,106 - WebSocketPriceUpdater - INFO - WebSocket connected for ASTERUSDT depth stream
2025-10-01 11:07:10,292 - UserDataUpdater - INFO - User data WebSocket connected!
2025-10-01 11:07:10,348 - UserDataUpdater - INFO - User data WebSocket connected!
2025-10-01 11:07:10,498 - UserDataUpdater - INFO - User data WebSocket connected!
2025-10-01 11:07:10,691 - MarketMakerLoop - INFO - Supertrend signal changed to UPTREND.
2025-10-01 11:07:10,692 - MarketMakerLoop - INFO - Position is flat. Adjusting strategy bias: FLIP_MODE -> False
2025-10-01 11:07:10,744 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:07:10,794 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:07:11,024 - MarketMakerLoop - INFO - Position notional ($0.00) is below threshold. Resetting to SELL mode.
2025-10-01 11:07:11,335 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol ASTERUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol ASTERUSDT from parameter files.
2025-10-01 11:07:11,344 - MarketMakerLoop - ERROR - Current state: mode=SELL, position_size=0.0, active_order_id=None
2025-10-01 11:07:11,345 - MarketMakerLoop - ERROR - Market data: mid_price=1.70615, bid=1.7061, ask=1.7062
2025-10-01 11:07:11,345 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:07:13,065 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:07:13,890 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol HYPEUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol HYPEUSDT from parameter files.
2025-10-01 11:07:13,899 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:07:13,899 - MarketMakerLoop - ERROR - Market data: mid_price=46.8625, bid=46.862, ask=46.863
2025-10-01 11:07:13,900 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:07:15,387 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:07:18,186 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:07:20,977 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:07:22,117 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:07:25,208 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol ATOMUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol ATOMUSDT from parameter files.
2025-10-01 11:07:25,216 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:07:25,216 - MarketMakerLoop - ERROR - Market data: mid_price=4.215, bid=4.21, ask=4.22
2025-10-01 11:07:25,217 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:07:40,595 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol ASTERUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol ASTERUSDT from parameter files.
2025-10-01 11:07:40,597 - MarketMakerLoop - ERROR - Current state: mode=SELL, position_size=0.0, active_order_id=None
2025-10-01 11:07:40,598 - MarketMakerLoop - ERROR - Market data: mid_price=1.7062499999999998, bid=1.7062, ask=1.7063
2025-10-01 11:07:40,599 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:07:43,536 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol HYPEUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol HYPEUSDT from parameter files.
2025-10-01 11:07:43,539 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:07:43,540 - MarketMakerLoop - ERROR - Market data: mid_price=46.909499999999994, bid=46.909, ask=46.91
2025-10-01 11:07:43,541 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:07:54,325 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol ATOMUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol ATOMUSDT from parameter files.
2025-10-01 11:07:54,328 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:07:54,328 - MarketMakerLoop - ERROR - Market data: mid_price=4.215, bid=4.21, ask=4.22
2025-10-01 11:07:54,329 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:08:05,388 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:08:05,389 - PriceReporter - INFO - ATOMUSDT | Mid-Price: $4.2150 | Bid-Ask Spread: 0.237% | Bid: $4.2100 | Ask: $4.2200 | Balance: $100.00
2025-10-01 11:08:05,432 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:08:05,433 - PriceReporter - INFO - HYPEUSDT | Mid-Price: $46.9455 | Bid-Ask Spread: 0.002% | Bid: $46.9450 | Ask: $46.9460 | Balance: $100.00
2025-10-01 11:08:05,655 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:08:05,656 - PriceReporter - INFO - ASTERUSDT | Mid-Price: $1.7090 | Bid-Ask Spread: 0.018% | Bid: $1.7089 | Ask: $1.7092 | Balance: $100.00
2025-10-01 11:08:07,031 - UserDataUpdater - WARNING - No user data messages received for 60.0s. Connection may be stale. Reconnecting...
2025-10-01 11:08:07,089 - UserDataUpdater - WARNING - No user data messages received for 60.0s. Connection may be stale. Reconnecting...
2025-10-01 11:08:07,237 - UserDataUpdater - WARNING - No user data messages received for 60.0s. Connection may be stale. Reconnecting...
2025-10-01 11:08:07,335 - BalanceKeepalive - INFO - Balance keepalive task cancelled.
2025-10-01 11:08:07,336 - BalanceKeepalive - INFO - Balance keepalive task shutting down
2025-10-01 11:08:07,337 - UserDataUpdater - INFO - Reconnecting to user data WebSocket in 5.0s...
2025-10-01 11:08:07,403 - BalanceKeepalive - INFO - Balance keepalive task cancelled.
2025-10-01 11:08:07,404 - BalanceKeepalive - INFO - Balance keepalive task shutting down
2025-10-01 11:08:07,404 - UserDataUpdater - INFO - Reconnecting to user data WebSocket in 5.0s...
2025-10-01 11:08:07,538 - BalanceKeepalive - INFO - Balance keepalive task cancelled.
2025-10-01 11:08:07,539 - BalanceKeepalive - INFO - Balance keepalive task shutting down
2025-10-01 11:08:07,539 - UserDataUpdater - INFO - Reconnecting to user data WebSocket in 5.0s...
2025-10-01 11:08:08,973 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:08:09,975 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:08:10,977 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:08:11,914 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:08:11,978 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:08:12,339 - UserDataUpdater - INFO - Getting listen key for user data stream...
2025-10-01 11:08:12,406 - UserDataUpdater - INFO - Getting listen key for user data stream...
2025-10-01 11:08:12,541 - UserDataUpdater - INFO - Getting listen key for user data stream...
2025-10-01 11:08:12,789 - UserDataUpdater - INFO - User data listen key obtained: yyNiP3fhVs8SglQI3WeJ...
2025-10-01 11:08:12,789 - UserDataUpdater - INFO - Connecting to user data WebSocket: wss://fstream.asterdex.com/ws/yyNiP3fhVs8SglQI3WeJPdQLila2BMfDLcSAkA7nMt4gFpvCiuVdV5aRtzGz7tUP
2025-10-01 11:08:12,863 - UserDataUpdater - INFO - User data listen key obtained: yyNiP3fhVs8SglQI3WeJ...
2025-10-01 11:08:12,864 - UserDataUpdater - INFO - Connecting to user data WebSocket: wss://fstream.asterdex.com/ws/yyNiP3fhVs8SglQI3WeJPdQLila2BMfDLcSAkA7nMt4gFpvCiuVdV5aRtzGz7tUP
2025-10-01 11:08:12,916 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:08:12,981 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:08:13,473 - UserDataUpdater - INFO - User data listen key obtained: yyNiP3fhVs8SglQI3WeJ...
2025-10-01 11:08:13,474 - UserDataUpdater - INFO - Connecting to user data WebSocket: wss://fstream.asterdex.com/ws/yyNiP3fhVs8SglQI3WeJPdQLila2BMfDLcSAkA7nMt4gFpvCiuVdV5aRtzGz7tUP
2025-10-01 11:08:13,918 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:08:13,983 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:08:14,121 - UserDataUpdater - INFO - User data WebSocket connected!
2025-10-01 11:08:14,125 - UserDataUpdater - INFO - User data WebSocket connected!
2025-10-01 11:08:14,624 - UserDataUpdater - INFO - User data WebSocket connected!
2025-10-01 11:08:16,028 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol HYPEUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol HYPEUSDT from parameter files.
2025-10-01 11:08:16,030 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:08:16,031 - MarketMakerLoop - ERROR - Market data: mid_price=46.923500000000004, bid=46.923, ask=46.924
2025-10-01 11:08:16,031 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:08:16,082 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol ASTERUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol ASTERUSDT from parameter files.
2025-10-01 11:08:16,084 - MarketMakerLoop - ERROR - Current state: mode=SELL, position_size=0.0, active_order_id=None
2025-10-01 11:08:16,085 - MarketMakerLoop - ERROR - Market data: mid_price=1.70965, bid=1.7096, ask=1.7097
2025-10-01 11:08:16,085 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:08:22,958 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:08:25,738 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:08:28,514 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:08:30,816 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:08:33,138 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:08:35,935 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:08:38,250 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:08:40,580 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:08:41,945 - WebSocketPriceUpdater - WARNING - No price messages received for 60.0s. Connection may be stale. Reconnecting...
2025-10-01 11:08:42,236 - WebSocketPriceUpdater - INFO - Reconnecting to price WebSocket in 5.0s...
2025-10-01 11:08:42,582 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=False, User_Data_WS_Connected=True). Pausing trading logic.
2025-10-01 11:08:43,585 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=False, User_Data_WS_Connected=True). Pausing trading logic.
2025-10-01 11:08:44,587 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=False, User_Data_WS_Connected=True). Pausing trading logic.
2025-10-01 11:08:45,589 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=False, User_Data_WS_Connected=True). Pausing trading logic.
2025-10-01 11:08:45,690 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol ASTERUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol ASTERUSDT from parameter files.
2025-10-01 11:08:45,692 - MarketMakerLoop - ERROR - Current state: mode=SELL, position_size=0.0, active_order_id=None
2025-10-01 11:08:45,692 - MarketMakerLoop - ERROR - Market data: mid_price=1.71245, bid=1.7124, ask=1.7125
2025-10-01 11:08:45,693 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:08:46,118 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol HYPEUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol HYPEUSDT from parameter files.
2025-10-01 11:08:46,121 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:08:46,121 - MarketMakerLoop - ERROR - Market data: mid_price=46.944500000000005, bid=46.944, ask=46.945
2025-10-01 11:08:46,122 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:08:46,590 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=False, User_Data_WS_Connected=True). Pausing trading logic.
2025-10-01 11:08:45,573 - WebSocketPriceUpdater - INFO - Connecting to WebSocket: wss://fstream.asterdex.com/ws/atomusdt@depth5
2025-10-01 11:08:45,926 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=False, User_Data_WS_Connected=True). Pausing trading logic.
2025-10-01 11:08:46,911 - WebSocketPriceUpdater - INFO - WebSocket connected for ATOMUSDT depth stream
2025-10-01 11:08:47,720 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:08:50,496 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:08:52,823 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:08:55,593 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:08:59,148 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol ATOMUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol ATOMUSDT from parameter files.
2025-10-01 11:08:59,151 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:08:59,152 - MarketMakerLoop - ERROR - Market data: mid_price=4.215, bid=4.21, ask=4.22
2025-10-01 11:08:59,153 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:09:02,058 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:09:02,059 - PriceReporter - INFO - ATOMUSDT | Mid-Price: $4.2150 | Bid-Ask Spread: 0.237% | Bid: $4.2100 | Ask: $4.2200 | Balance: $100.00
2025-10-01 11:09:02,101 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:09:02,103 - PriceReporter - INFO - HYPEUSDT | Mid-Price: $46.9325 | Bid-Ask Spread: 0.002% | Bid: $46.9320 | Ask: $46.9330 | Balance: $100.00
2025-10-01 11:09:02,325 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:09:02,326 - PriceReporter - INFO - ASTERUSDT | Mid-Price: $1.7134 | Bid-Ask Spread: 0.006% | Bid: $1.7133 | Ask: $1.7134 | Balance: $100.00
2025-10-01 11:09:29,145 - root - INFO - Starting market maker with arguments: Namespace(symbol='ASTERUSDT')
2025-10-01 11:09:29,146 - root - INFO - FLIP_MODE is set to: False
2025-10-01 11:09:29,154 - root - INFO - Sending initial cancel all orders for ASTERUSDT to ensure a clean slate.
2025-10-01 11:09:29,194 - root - INFO - Starting market maker with arguments: Namespace(symbol='ATOMUSDT')
2025-10-01 11:09:29,194 - root - INFO - FLIP_MODE is set to: False
2025-10-01 11:09:29,200 - root - INFO - Sending initial cancel all orders for ATOMUSDT to ensure a clean slate.
2025-10-01 11:09:29,375 - root - INFO - Starting market maker with arguments: Namespace(symbol='HYPEUSDT')
2025-10-01 11:09:29,376 - root - INFO - FLIP_MODE is set to: False
2025-10-01 11:09:29,381 - root - INFO - Sending initial cancel all orders for HYPEUSDT to ensure a clean slate.
2025-10-01 11:09:29,658 - root - INFO - Fetching initial account balance...
2025-10-01 11:09:29,659 - InitialBalance - INFO - Fetching initial account balance...
2025-10-01 11:09:29,863 - root - INFO - Fetching initial account balance...
2025-10-01 11:09:29,864 - InitialBalance - INFO - Fetching initial account balance...
2025-10-01 11:09:30,119 - root - INFO - Fetching initial account balance...
2025-10-01 11:09:30,129 - InitialBalance - INFO - Fetching initial account balance...
2025-10-01 11:09:30,440 - InitialBalance - INFO - Initial USDF balance: 0.0
2025-10-01 11:09:30,450 - InitialBalance - INFO - Initial USDT balance: 0.0
2025-10-01 11:09:30,451 - InitialBalance - INFO - Initial USDC balance: 100.0
2025-10-01 11:09:30,451 - InitialBalance - INFO - Initial balance loaded: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:09:30,460 - InitialBalance - INFO - Initial USDF balance: 0.0
2025-10-01 11:09:30,468 - SupertrendInitializer - INFO - Initialized Supertrend signal to: DOWNTREND (-1)
2025-10-01 11:09:30,469 - SupertrendInitializer - INFO - Initial strategy bias set by signal: FLIP_MODE -> True
2025-10-01 11:09:30,469 - root - INFO - Checking for existing position for ATOMUSDT...
2025-10-01 11:09:30,472 - InitialBalance - INFO - Initial USDT balance: 0.0
2025-10-01 11:09:30,473 - InitialBalance - INFO - Initial USDC balance: 100.0
2025-10-01 11:09:30,475 - InitialBalance - INFO - Initial balance loaded: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:09:30,499 - SupertrendInitializer - INFO - Initial Supertrend signal confirms default bias: FLIP_MODE -> False
2025-10-01 11:09:30,499 - root - INFO - Checking for existing position for ASTERUSDT...
2025-10-01 11:09:30,653 - InitialBalance - INFO - Initial USDF balance: 0.0
2025-10-01 11:09:30,653 - InitialBalance - INFO - Initial USDT balance: 0.0
2025-10-01 11:09:30,654 - InitialBalance - INFO - Initial USDC balance: 100.0
2025-10-01 11:09:30,655 - InitialBalance - INFO - Initial balance loaded: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:09:30,663 - SupertrendInitializer - INFO - Initial Supertrend signal confirms default bias: FLIP_MODE -> False
2025-10-01 11:09:30,665 - root - INFO - Checking for existing position for HYPEUSDT...
2025-10-01 11:09:30,797 - root - INFO - No significant existing position found.
2025-10-01 11:09:30,798 - root - INFO - Attempting to set leverage for ATOMUSDT to 1x.
2025-10-01 11:09:30,820 - root - INFO - No significant existing position found.
2025-10-01 11:09:30,821 - root - INFO - Attempting to set leverage for ASTERUSDT to 1x.
2025-10-01 11:09:30,985 - root - INFO - No significant existing position found.
2025-10-01 11:09:30,986 - root - INFO - Attempting to set leverage for HYPEUSDT to 1x.
2025-10-01 11:09:31,307 - root - INFO - Successfully set leverage for HYPEUSDT to 1x.
2025-10-01 11:09:31,307 - root - INFO - Starting in default BUY mode.
2025-10-01 11:09:31,308 - MarketMakerLoop - INFO - Fetching trading rules for HYPEUSDT...
2025-10-01 11:09:31,309 - WebSocketPriceUpdater - INFO - Connecting to WebSocket: wss://fstream.asterdex.com/ws/hypeusdt@depth5
2025-10-01 11:09:31,314 - UserDataUpdater - INFO - Getting listen key for user data stream...
2025-10-01 11:09:31,580 - root - INFO - Successfully set leverage for ATOMUSDT to 1x.
2025-10-01 11:09:31,581 - root - INFO - Starting in default SELL mode.
2025-10-01 11:09:31,583 - MarketMakerLoop - INFO - Fetching trading rules for ATOMUSDT...
2025-10-01 11:09:31,584 - WebSocketPriceUpdater - INFO - Connecting to WebSocket: wss://fstream.asterdex.com/ws/atomusdt@depth5
2025-10-01 11:09:31,590 - UserDataUpdater - INFO - Getting listen key for user data stream...
2025-10-01 11:09:31,626 - root - INFO - Successfully set leverage for ASTERUSDT to 1x.
2025-10-01 11:09:31,627 - root - INFO - Starting in default BUY mode.
2025-10-01 11:09:31,628 - MarketMakerLoop - INFO - Fetching trading rules for ASTERUSDT...
2025-10-01 11:09:31,629 - WebSocketPriceUpdater - INFO - Connecting to WebSocket: wss://fstream.asterdex.com/ws/asterusdt@depth5
2025-10-01 11:09:31,636 - UserDataUpdater - INFO - Getting listen key for user data stream...
2025-10-01 11:09:31,808 - UserDataUpdater - INFO - User data listen key obtained: yyNiP3fhVs8SglQI3WeJ...
2025-10-01 11:09:31,808 - UserDataUpdater - INFO - Connecting to user data WebSocket: wss://fstream.asterdex.com/ws/yyNiP3fhVs8SglQI3WeJPdQLila2BMfDLcSAkA7nMt4gFpvCiuVdV5aRtzGz7tUP
2025-10-01 11:09:32,062 - UserDataUpdater - INFO - User data listen key obtained: yyNiP3fhVs8SglQI3WeJ...
2025-10-01 11:09:32,063 - UserDataUpdater - INFO - Connecting to user data WebSocket: wss://fstream.asterdex.com/ws/yyNiP3fhVs8SglQI3WeJPdQLila2BMfDLcSAkA7nMt4gFpvCiuVdV5aRtzGz7tUP
2025-10-01 11:09:32,094 - MarketMakerLoop - INFO - Filters loaded: {'price_precision': 3, 'tick_size': 0.001, 'quantity_precision': 2, 'step_size': 0.01, 'min_notional': 5.0}
2025-10-01 11:09:32,097 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=False, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:09:32,380 - MarketMakerLoop - INFO - Filters loaded: {'price_precision': 2, 'tick_size': 0.01, 'quantity_precision': 2, 'step_size': 0.01, 'min_notional': 5.0}
2025-10-01 11:09:32,382 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=False, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:09:32,407 - MarketMakerLoop - INFO - Filters loaded: {'price_precision': 4, 'tick_size': 0.0001, 'quantity_precision': 2, 'step_size': 0.01, 'min_notional': 5.0}
2025-10-01 11:09:32,407 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=False, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:09:32,514 - UserDataUpdater - INFO - User data listen key obtained: yyNiP3fhVs8SglQI3WeJ...
2025-10-01 11:09:32,515 - UserDataUpdater - INFO - Connecting to user data WebSocket: wss://fstream.asterdex.com/ws/yyNiP3fhVs8SglQI3WeJPdQLila2BMfDLcSAkA7nMt4gFpvCiuVdV5aRtzGz7tUP
2025-10-01 11:09:32,610 - WebSocketPriceUpdater - INFO - WebSocket connected for HYPEUSDT depth stream
2025-10-01 11:09:32,796 - WebSocketPriceUpdater - INFO - WebSocket connected for ATOMUSDT depth stream
2025-10-01 11:09:32,850 - WebSocketPriceUpdater - INFO - WebSocket connected for ASTERUSDT depth stream
2025-10-01 11:09:33,003 - UserDataUpdater - INFO - User data WebSocket connected!
2025-10-01 11:09:33,271 - UserDataUpdater - INFO - User data WebSocket connected!
2025-10-01 11:09:33,384 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:09:33,697 - UserDataUpdater - INFO - User data WebSocket connected!
2025-10-01 11:09:33,747 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol HYPEUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol HYPEUSDT from parameter files.
2025-10-01 11:09:33,755 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:09:33,755 - MarketMakerLoop - ERROR - Market data: mid_price=46.7855, bid=46.785, ask=46.786
2025-10-01 11:09:33,756 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:09:34,049 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol ASTERUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol ASTERUSDT from parameter files.
2025-10-01 11:09:34,056 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:09:34,056 - MarketMakerLoop - ERROR - Market data: mid_price=1.71285, bid=1.7128, ask=1.7129
2025-10-01 11:09:34,057 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:09:34,711 - MarketMakerLoop - INFO - Position notional ($0.00) is below threshold. Resetting to SELL mode.
2025-10-01 11:09:34,712 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:09:37,037 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:09:39,835 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:09:42,145 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:09:42,740 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:09:45,048 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:09:47,814 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:09:50,937 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol ATOMUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol ATOMUSDT from parameter files.
2025-10-01 11:09:50,948 - MarketMakerLoop - ERROR - Current state: mode=SELL, position_size=0.0, active_order_id=None
2025-10-01 11:09:50,949 - MarketMakerLoop - ERROR - Market data: mid_price=4.215, bid=4.21, ask=4.22
2025-10-01 11:09:50,949 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:10:03,420 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol HYPEUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol HYPEUSDT from parameter files.
2025-10-01 11:10:03,422 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:10:03,423 - MarketMakerLoop - ERROR - Market data: mid_price=46.7235, bid=46.723, ask=46.724
2025-10-01 11:10:03,423 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:10:03,649 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol ASTERUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol ASTERUSDT from parameter files.
2025-10-01 11:10:03,652 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:10:03,652 - MarketMakerLoop - ERROR - Market data: mid_price=1.71495, bid=1.7149, ask=1.715
2025-10-01 11:10:03,653 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:10:19,791 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:10:22,115 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:10:24,910 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:10:27,241 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:10:27,962 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:10:27,963 - PriceReporter - INFO - HYPEUSDT | Mid-Price: $46.8205 | Bid-Ask Spread: 0.002% | Bid: $46.8200 | Ask: $46.8210 | Balance: $100.00
2025-10-01 11:10:28,239 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:10:28,283 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:10:28,284 - PriceReporter - INFO - ASTERUSDT | Mid-Price: $1.7148 | Bid-Ask Spread: 0.017% | Bid: $1.7147 | Ask: $1.7150 | Balance: $100.00
2025-10-01 11:10:29,649 - UserDataUpdater - WARNING - No user data messages received for 60.0s. Connection may be stale. Reconnecting...
2025-10-01 11:10:29,921 - UserDataUpdater - WARNING - No user data messages received for 60.0s. Connection may be stale. Reconnecting...
2025-10-01 11:10:29,937 - BalanceKeepalive - INFO - Balance keepalive task cancelled.
2025-10-01 11:10:29,938 - BalanceKeepalive - INFO - Balance keepalive task shutting down
2025-10-01 11:10:29,938 - UserDataUpdater - INFO - Reconnecting to user data WebSocket in 5.0s...
2025-10-01 11:10:30,029 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:10:30,188 - BalanceKeepalive - INFO - Balance keepalive task cancelled.
2025-10-01 11:10:30,188 - BalanceKeepalive - INFO - Balance keepalive task shutting down
2025-10-01 11:10:30,189 - UserDataUpdater - INFO - Reconnecting to user data WebSocket in 5.0s...
2025-10-01 11:10:30,343 - UserDataUpdater - WARNING - No user data messages received for 60.0s. Connection may be stale. Reconnecting...
2025-10-01 11:10:30,628 - BalanceKeepalive - INFO - Balance keepalive task cancelled.
2025-10-01 11:10:30,628 - BalanceKeepalive - INFO - Balance keepalive task shutting down
2025-10-01 11:10:30,630 - UserDataUpdater - INFO - Reconnecting to user data WebSocket in 5.0s...
2025-10-01 11:10:31,785 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:10:32,015 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:10:32,032 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:10:32,786 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:10:33,017 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:10:33,035 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:10:33,790 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:10:34,018 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:10:34,038 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:10:34,793 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:10:34,941 - UserDataUpdater - INFO - Getting listen key for user data stream...
2025-10-01 11:10:35,020 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:10:35,040 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:10:35,191 - UserDataUpdater - INFO - Getting listen key for user data stream...
2025-10-01 11:10:35,406 - UserDataUpdater - INFO - User data listen key obtained: yyNiP3fhVs8SglQI3WeJ...
2025-10-01 11:10:35,407 - UserDataUpdater - INFO - Connecting to user data WebSocket: wss://fstream.asterdex.com/ws/yyNiP3fhVs8SglQI3WeJPdQLila2BMfDLcSAkA7nMt4gFpvCiuVdV5aRtzGz7tUP
2025-10-01 11:10:35,627 - UserDataUpdater - INFO - User data listen key obtained: yyNiP3fhVs8SglQI3WeJ...
2025-10-01 11:10:35,628 - UserDataUpdater - INFO - Connecting to user data WebSocket: wss://fstream.asterdex.com/ws/yyNiP3fhVs8SglQI3WeJPdQLila2BMfDLcSAkA7nMt4gFpvCiuVdV5aRtzGz7tUP
2025-10-01 11:10:35,631 - UserDataUpdater - INFO - Getting listen key for user data stream...
2025-10-01 11:10:35,796 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:10:36,022 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:10:36,041 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:10:36,416 - UserDataUpdater - INFO - User data listen key obtained: yyNiP3fhVs8SglQI3WeJ...
2025-10-01 11:10:36,417 - UserDataUpdater - INFO - Connecting to user data WebSocket: wss://fstream.asterdex.com/ws/yyNiP3fhVs8SglQI3WeJPdQLila2BMfDLcSAkA7nMt4gFpvCiuVdV5aRtzGz7tUP
2025-10-01 11:10:36,734 - UserDataUpdater - INFO - User data WebSocket connected!
2025-10-01 11:10:36,814 - UserDataUpdater - INFO - User data WebSocket connected!
2025-10-01 11:10:37,043 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:10:37,590 - UserDataUpdater - INFO - User data WebSocket connected!
2025-10-01 11:10:37,645 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol ASTERUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol ASTERUSDT from parameter files.
2025-10-01 11:10:37,647 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:10:37,647 - MarketMakerLoop - ERROR - Market data: mid_price=1.71455, bid=1.7145, ask=1.7146
2025-10-01 11:10:37,648 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:10:37,887 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol HYPEUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol HYPEUSDT from parameter files.
2025-10-01 11:10:37,889 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:10:37,889 - MarketMakerLoop - ERROR - Market data: mid_price=46.8215, bid=46.821, ask=46.822
2025-10-01 11:10:37,890 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:10:38,816 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:10:39,893 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:10:42,683 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:10:45,016 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:10:47,105 - WebSocketPriceUpdater - WARNING - No price messages received for 60.0s. Connection may be stale. Reconnecting...
2025-10-01 11:10:47,397 - WebSocketPriceUpdater - INFO - Reconnecting to price WebSocket in 5.0s...
2025-10-01 11:10:47,797 - MarketMakerLoop - INFO - Waiting for valid price data from WebSocket...
2025-10-01 11:10:49,799 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=False, User_Data_WS_Connected=True). Pausing trading logic.
2025-10-01 11:10:50,801 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=False, User_Data_WS_Connected=True). Pausing trading logic.
2025-10-01 11:10:51,804 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=False, User_Data_WS_Connected=True). Pausing trading logic.
2025-10-01 11:10:52,400 - WebSocketPriceUpdater - INFO - Connecting to WebSocket: wss://fstream.asterdex.com/ws/atomusdt@depth5
2025-10-01 11:10:52,805 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=False, User_Data_WS_Connected=True). Pausing trading logic.
2025-10-01 11:10:53,724 - WebSocketPriceUpdater - INFO - WebSocket connected for ATOMUSDT depth stream
2025-10-01 11:10:55,372 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol ATOMUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol ATOMUSDT from parameter files.
2025-10-01 11:10:55,376 - MarketMakerLoop - ERROR - Current state: mode=SELL, position_size=0.0, active_order_id=None
2025-10-01 11:10:55,377 - MarketMakerLoop - ERROR - Market data: mid_price=4.215, bid=4.21, ask=4.22
2025-10-01 11:10:55,377 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:11:07,261 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol ASTERUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol ASTERUSDT from parameter files.
2025-10-01 11:11:07,264 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:11:07,265 - MarketMakerLoop - ERROR - Market data: mid_price=1.71475, bid=1.7147, ask=1.7148
2025-10-01 11:11:07,267 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:11:07,409 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol HYPEUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol HYPEUSDT from parameter files.
2025-10-01 11:11:07,411 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:11:07,412 - MarketMakerLoop - ERROR - Market data: mid_price=46.8585, bid=46.858, ask=46.859
2025-10-01 11:11:07,412 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:16:55,562 - root - INFO - Starting market maker with arguments: Namespace(symbol='ASTERUSDT')
2025-10-01 11:16:55,563 - root - INFO - FLIP_MODE is set to: False
2025-10-01 11:16:55,574 - root - INFO - Sending initial cancel all orders for ASTERUSDT to ensure a clean slate.
2025-10-01 11:16:55,631 - root - INFO - Starting market maker with arguments: Namespace(symbol='BNBUSDT')
2025-10-01 11:16:55,631 - root - INFO - FLIP_MODE is set to: False
2025-10-01 11:16:55,639 - root - INFO - Sending initial cancel all orders for BNBUSDT to ensure a clean slate.
2025-10-01 11:16:56,036 - root - INFO - Fetching initial account balance...
2025-10-01 11:16:56,037 - InitialBalance - INFO - Fetching initial account balance...
2025-10-01 11:16:56,570 - root - INFO - Fetching initial account balance...
2025-10-01 11:16:56,571 - InitialBalance - INFO - Fetching initial account balance...
2025-10-01 11:16:56,828 - InitialBalance - INFO - Initial USDF balance: 0.0
2025-10-01 11:16:56,829 - InitialBalance - INFO - Initial USDT balance: 0.0
2025-10-01 11:16:56,829 - InitialBalance - INFO - Initial USDC balance: 100.0
2025-10-01 11:16:56,830 - InitialBalance - INFO - Initial balance loaded: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:16:56,842 - SupertrendInitializer - INFO - Initial Supertrend signal confirms default bias: FLIP_MODE -> False
2025-10-01 11:16:56,847 - root - INFO - Checking for existing position for ASTERUSDT...
2025-10-01 11:16:57,184 - root - INFO - No significant existing position found.
2025-10-01 11:16:57,184 - root - INFO - Attempting to set leverage for ASTERUSDT to 1x.
2025-10-01 11:16:57,350 - InitialBalance - INFO - Initial USDF balance: 0.0
2025-10-01 11:16:57,351 - InitialBalance - INFO - Initial USDT balance: 0.0
2025-10-01 11:16:57,352 - InitialBalance - INFO - Initial USDC balance: 100.0
2025-10-01 11:16:57,353 - InitialBalance - INFO - Initial balance loaded: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:16:57,354 - SupertrendInitializer - WARNING - Supertrend params file not found at /app/params/supertrend_params_BNB.json. Using default FLIP_MODE=False.
2025-10-01 11:16:57,355 - root - INFO - Checking for existing position for BNBUSDT...
2025-10-01 11:16:57,654 - root - INFO - No significant existing position found.
2025-10-01 11:16:57,654 - root - INFO - Attempting to set leverage for BNBUSDT to 1x.
2025-10-01 11:16:57,977 - root - INFO - Successfully set leverage for ASTERUSDT to 1x.
2025-10-01 11:16:57,978 - root - INFO - Starting in default BUY mode.
2025-10-01 11:16:57,979 - MarketMakerLoop - INFO - Fetching trading rules for ASTERUSDT...
2025-10-01 11:16:57,980 - WebSocketPriceUpdater - INFO - Connecting to WebSocket: wss://fstream.asterdex.com/ws/asterusdt@depth5
2025-10-01 11:16:57,987 - UserDataUpdater - INFO - Getting listen key for user data stream...
2025-10-01 11:16:58,426 - UserDataUpdater - INFO - User data listen key obtained: yyNiP3fhVs8SglQI3WeJ...
2025-10-01 11:16:58,427 - UserDataUpdater - INFO - Connecting to user data WebSocket: wss://fstream.asterdex.com/ws/yyNiP3fhVs8SglQI3WeJPdQLila2BMfDLcSAkA7nMt4gFpvCiuVdV5aRtzGz7tUP
2025-10-01 11:16:58,439 - root - INFO - Successfully set leverage for BNBUSDT to 1x.
2025-10-01 11:16:58,440 - root - INFO - Starting in default BUY mode.
2025-10-01 11:16:58,441 - MarketMakerLoop - INFO - Fetching trading rules for BNBUSDT...
2025-10-01 11:16:58,442 - WebSocketPriceUpdater - INFO - Connecting to WebSocket: wss://fstream.asterdex.com/ws/bnbusdt@depth5
2025-10-01 11:16:58,450 - UserDataUpdater - INFO - Getting listen key for user data stream...
2025-10-01 11:16:58,452 - SupertrendUpdater - WARNING - Supertrend params file not found at /app/params/supertrend_params_BNB.json. Defaulting to UPTREND (+1).
2025-10-01 11:16:58,748 - MarketMakerLoop - INFO - Filters loaded: {'price_precision': 4, 'tick_size': 0.0001, 'quantity_precision': 2, 'step_size': 0.01, 'min_notional': 5.0}
2025-10-01 11:16:58,749 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=False, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:16:58,916 - UserDataUpdater - INFO - User data listen key obtained: yyNiP3fhVs8SglQI3WeJ...
2025-10-01 11:16:58,918 - UserDataUpdater - INFO - Connecting to user data WebSocket: wss://fstream.asterdex.com/ws/yyNiP3fhVs8SglQI3WeJPdQLila2BMfDLcSAkA7nMt4gFpvCiuVdV5aRtzGz7tUP
2025-10-01 11:16:59,219 - MarketMakerLoop - INFO - Filters loaded: {'price_precision': 1, 'tick_size': 0.1, 'quantity_precision': 2, 'step_size': 0.01, 'min_notional': 5.0}
2025-10-01 11:16:59,220 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=False, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:16:59,332 - WebSocketPriceUpdater - INFO - WebSocket connected for ASTERUSDT depth stream
2025-10-01 11:16:59,627 - WebSocketPriceUpdater - INFO - WebSocket connected for BNBUSDT depth stream
2025-10-01 11:16:59,627 - UserDataUpdater - INFO - User data WebSocket connected!
2025-10-01 11:17:00,117 - UserDataUpdater - INFO - User data WebSocket connected!
2025-10-01 11:17:00,846 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol ASTERUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol ASTERUSDT from parameter files.
2025-10-01 11:17:00,862 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:17:00,863 - MarketMakerLoop - ERROR - Market data: mid_price=1.7209500000000002, bid=1.7209, ask=1.721
2025-10-01 11:17:00,867 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:17:01,345 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol BNBUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol BNBUSDT from parameter files.
2025-10-01 11:17:01,355 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:17:01,356 - MarketMakerLoop - ERROR - Market data: mid_price=1028.75, bid=1028.7, ask=1028.8
2025-10-01 11:17:01,356 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:17:29,932 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol ASTERUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol ASTERUSDT from parameter files.
2025-10-01 11:17:29,934 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:17:29,935 - MarketMakerLoop - ERROR - Market data: mid_price=1.72125, bid=1.7212, ask=1.7213
2025-10-01 11:17:29,936 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:17:30,487 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol BNBUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol BNBUSDT from parameter files.
2025-10-01 11:17:30,489 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:17:30,490 - MarketMakerLoop - ERROR - Market data: mid_price=1028.75, bid=1028.7, ask=1028.8
2025-10-01 11:17:30,491 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:17:54,617 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:17:54,618 - PriceReporter - INFO - ASTERUSDT | Mid-Price: $1.7203 | Bid-Ask Spread: 0.006% | Bid: $1.7203 | Ask: $1.7204 | Balance: $100.00
2025-10-01 11:17:55,080 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:17:55,082 - PriceReporter - INFO - BNBUSDT | Mid-Price: $1028.7500 | Bid-Ask Spread: 0.010% | Bid: $1028.7000 | Ask: $1028.8000 | Balance: $100.00
2025-10-01 11:17:56,257 - UserDataUpdater - WARNING - No user data messages received for 60.0s. Connection may be stale. Reconnecting...
2025-10-01 11:17:56,553 - BalanceKeepalive - INFO - Balance keepalive task cancelled.
2025-10-01 11:17:56,553 - BalanceKeepalive - INFO - Balance keepalive task shutting down
2025-10-01 11:17:56,554 - UserDataUpdater - INFO - Reconnecting to user data WebSocket in 5.0s...
2025-10-01 11:17:56,748 - UserDataUpdater - WARNING - No user data messages received for 60.0s. Connection may be stale. Reconnecting...
2025-10-01 11:17:57,054 - BalanceKeepalive - INFO - Balance keepalive task cancelled.
2025-10-01 11:17:57,054 - BalanceKeepalive - INFO - Balance keepalive task shutting down
2025-10-01 11:17:57,055 - UserDataUpdater - INFO - Reconnecting to user data WebSocket in 5.0s...
2025-10-01 11:17:58,255 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:17:58,809 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:17:59,256 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:17:59,815 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:18:00,258 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:18:00,817 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:18:01,260 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:18:01,556 - UserDataUpdater - INFO - Getting listen key for user data stream...
2025-10-01 11:18:01,820 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:18:02,056 - UserDataUpdater - INFO - User data listen key obtained: yyNiP3fhVs8SglQI3WeJ...
2025-10-01 11:18:02,056 - UserDataUpdater - INFO - Getting listen key for user data stream...
2025-10-01 11:18:02,056 - UserDataUpdater - INFO - Connecting to user data WebSocket: wss://fstream.asterdex.com/ws/yyNiP3fhVs8SglQI3WeJPdQLila2BMfDLcSAkA7nMt4gFpvCiuVdV5aRtzGz7tUP
2025-10-01 11:18:02,263 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:18:02,491 - UserDataUpdater - INFO - User data listen key obtained: yyNiP3fhVs8SglQI3WeJ...
2025-10-01 11:18:02,492 - UserDataUpdater - INFO - Connecting to user data WebSocket: wss://fstream.asterdex.com/ws/yyNiP3fhVs8SglQI3WeJPdQLila2BMfDLcSAkA7nMt4gFpvCiuVdV5aRtzGz7tUP
2025-10-01 11:18:02,821 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:18:03,265 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:18:03,358 - UserDataUpdater - INFO - User data WebSocket connected!
2025-10-01 11:18:03,672 - UserDataUpdater - INFO - User data WebSocket connected!
2025-10-01 11:18:04,887 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol ASTERUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol ASTERUSDT from parameter files.
2025-10-01 11:18:04,889 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:18:04,889 - MarketMakerLoop - ERROR - Market data: mid_price=1.7184499999999998, bid=1.7184, ask=1.7185
2025-10-01 11:18:04,890 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:18:04,931 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol BNBUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol BNBUSDT from parameter files.
2025-10-01 11:18:04,933 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:18:04,934 - MarketMakerLoop - ERROR - Market data: mid_price=1028.75, bid=1028.7, ask=1028.8
2025-10-01 11:18:04,934 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:18:34,037 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol BNBUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol BNBUSDT from parameter files.
2025-10-01 11:18:34,039 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:18:34,039 - MarketMakerLoop - ERROR - Market data: mid_price=1028.75, bid=1028.7, ask=1028.8
2025-10-01 11:18:34,040 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:18:34,423 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol ASTERUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol ASTERUSDT from parameter files.
2025-10-01 11:18:34,426 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:18:34,427 - MarketMakerLoop - ERROR - Market data: mid_price=1.71765, bid=1.7176, ask=1.7177
2025-10-01 11:18:34,428 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:18:51,246 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:18:51,247 - PriceReporter - INFO - ASTERUSDT | Mid-Price: $1.7146 | Bid-Ask Spread: 0.006% | Bid: $1.7145 | Ask: $1.7146 | Balance: $100.00
2025-10-01 11:18:51,712 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:18:51,713 - PriceReporter - INFO - BNBUSDT | Mid-Price: $1028.8500 | Bid-Ask Spread: 0.010% | Bid: $1028.8000 | Ask: $1028.9000 | Balance: $100.00
2025-10-01 11:18:59,988 - UserDataUpdater - WARNING - No user data messages received for 60.0s. Connection may be stale. Reconnecting...
2025-10-01 11:19:00,272 - BalanceKeepalive - INFO - Balance keepalive task cancelled.
2025-10-01 11:19:00,273 - BalanceKeepalive - INFO - Balance keepalive task shutting down
2025-10-01 11:19:00,274 - UserDataUpdater - INFO - Reconnecting to user data WebSocket in 5.0s...
2025-10-01 11:19:00,302 - UserDataUpdater - WARNING - No user data messages received for 60.0s. Connection may be stale. Reconnecting...
2025-10-01 11:19:00,597 - BalanceKeepalive - INFO - Balance keepalive task cancelled.
2025-10-01 11:19:00,598 - BalanceKeepalive - INFO - Balance keepalive task shutting down
2025-10-01 11:19:00,599 - UserDataUpdater - INFO - Reconnecting to user data WebSocket in 5.0s...
2025-10-01 11:19:02,360 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:19:02,747 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:19:03,362 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:19:03,750 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:19:04,365 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:19:04,751 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:19:05,277 - UserDataUpdater - INFO - Getting listen key for user data stream...
2025-10-01 11:19:05,368 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:19:05,600 - UserDataUpdater - INFO - Getting listen key for user data stream...
2025-10-01 11:19:05,754 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:19:05,800 - UserDataUpdater - INFO - User data listen key obtained: yyNiP3fhVs8SglQI3WeJ...
2025-10-01 11:19:05,801 - UserDataUpdater - INFO - Connecting to user data WebSocket: wss://fstream.asterdex.com/ws/yyNiP3fhVs8SglQI3WeJPdQLila2BMfDLcSAkA7nMt4gFpvCiuVdV5aRtzGz7tUP
2025-10-01 11:19:06,019 - UserDataUpdater - INFO - User data listen key obtained: yyNiP3fhVs8SglQI3WeJ...
2025-10-01 11:19:06,020 - UserDataUpdater - INFO - Connecting to user data WebSocket: wss://fstream.asterdex.com/ws/yyNiP3fhVs8SglQI3WeJPdQLila2BMfDLcSAkA7nMt4gFpvCiuVdV5aRtzGz7tUP
2025-10-01 11:19:06,369 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:19:06,756 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:19:07,147 - UserDataUpdater - INFO - User data WebSocket connected!
2025-10-01 11:19:07,168 - UserDataUpdater - INFO - User data WebSocket connected!
2025-10-01 11:19:08,833 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol ASTERUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol ASTERUSDT from parameter files.
2025-10-01 11:19:08,834 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:19:08,835 - MarketMakerLoop - ERROR - Market data: mid_price=1.71435, bid=1.7143, ask=1.7144
2025-10-01 11:19:08,836 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:19:08,921 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol BNBUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol BNBUSDT from parameter files.
2025-10-01 11:19:08,923 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:19:08,924 - MarketMakerLoop - ERROR - Market data: mid_price=1029.35, bid=1029.3, ask=1029.4
2025-10-01 11:19:08,925 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:19:38,225 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol ASTERUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol ASTERUSDT from parameter files.
2025-10-01 11:19:38,229 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:19:38,230 - MarketMakerLoop - ERROR - Market data: mid_price=1.71435, bid=1.7143, ask=1.7144
2025-10-01 11:19:38,231 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:19:38,293 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol BNBUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol BNBUSDT from parameter files.
2025-10-01 11:19:38,296 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:19:38,297 - MarketMakerLoop - ERROR - Market data: mid_price=1029.25, bid=1029.2, ask=1029.3
2025-10-01 11:19:38,297 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:19:47,816 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:19:47,817 - PriceReporter - INFO - ASTERUSDT | Mid-Price: $1.7157 | Bid-Ask Spread: 0.006% | Bid: $1.7157 | Ask: $1.7158 | Balance: $100.00
2025-10-01 11:19:48,281 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:19:48,282 - PriceReporter - INFO - BNBUSDT | Mid-Price: $1029.1500 | Bid-Ask Spread: 0.010% | Bid: $1029.1000 | Ask: $1029.2000 | Balance: $100.00
2025-10-01 11:20:03,717 - UserDataUpdater - WARNING - No user data messages received for 60.0s. Connection may be stale. Reconnecting...
2025-10-01 11:20:03,738 - UserDataUpdater - WARNING - No user data messages received for 60.0s. Connection may be stale. Reconnecting...
2025-10-01 11:20:04,187 - BalanceKeepalive - INFO - Balance keepalive task cancelled.
2025-10-01 11:20:04,187 - BalanceKeepalive - INFO - Balance keepalive task cancelled.
2025-10-01 11:20:04,188 - BalanceKeepalive - INFO - Balance keepalive task shutting down
2025-10-01 11:20:04,189 - BalanceKeepalive - INFO - Balance keepalive task shutting down
2025-10-01 11:20:04,189 - UserDataUpdater - INFO - Reconnecting to user data WebSocket in 5.0s...
2025-10-01 11:20:04,189 - UserDataUpdater - INFO - Reconnecting to user data WebSocket in 5.0s...
2025-10-01 11:20:06,492 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:20:06,559 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:20:05,792 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:20:05,857 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:20:06,793 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:20:06,859 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:20:07,486 - UserDataUpdater - INFO - Getting listen key for user data stream...
2025-10-01 11:20:07,487 - UserDataUpdater - INFO - Getting listen key for user data stream...
2025-10-01 11:20:07,796 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:20:07,861 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:20:07,963 - UserDataUpdater - INFO - User data listen key obtained: yyNiP3fhVs8SglQI3WeJ...
2025-10-01 11:20:07,963 - UserDataUpdater - INFO - Connecting to user data WebSocket: wss://fstream.asterdex.com/ws/yyNiP3fhVs8SglQI3WeJPdQLila2BMfDLcSAkA7nMt4gFpvCiuVdV5aRtzGz7tUP
2025-10-01 11:20:08,432 - UserDataUpdater - INFO - User data listen key obtained: yyNiP3fhVs8SglQI3WeJ...
2025-10-01 11:20:08,438 - UserDataUpdater - INFO - Connecting to user data WebSocket: wss://fstream.asterdex.com/ws/yyNiP3fhVs8SglQI3WeJPdQLila2BMfDLcSAkA7nMt4gFpvCiuVdV5aRtzGz7tUP
2025-10-01 11:20:08,797 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:20:08,863 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:20:09,279 - UserDataUpdater - INFO - User data WebSocket connected!
2025-10-01 11:20:09,620 - UserDataUpdater - INFO - User data WebSocket connected!
2025-10-01 11:20:10,415 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol ASTERUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol ASTERUSDT from parameter files.
2025-10-01 11:20:10,417 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:20:10,417 - MarketMakerLoop - ERROR - Market data: mid_price=1.7173, bid=1.7172, ask=1.7174
2025-10-01 11:20:10,418 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:20:10,464 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol BNBUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol BNBUSDT from parameter files.
2025-10-01 11:20:10,467 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:20:10,467 - MarketMakerLoop - ERROR - Market data: mid_price=1029.95, bid=1029.9, ask=1030.0
2025-10-01 11:20:10,468 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:20:40,137 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol BNBUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol BNBUSDT from parameter files.
2025-10-01 11:20:40,139 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:20:40,140 - MarketMakerLoop - ERROR - Market data: mid_price=1029.85, bid=1029.8, ask=1029.9
2025-10-01 11:20:40,140 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:20:40,487 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol ASTERUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol ASTERUSDT from parameter files.
2025-10-01 11:20:40,490 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:20:40,491 - MarketMakerLoop - ERROR - Market data: mid_price=1.7177, bid=1.7176, ask=1.7178
2025-10-01 11:20:40,492 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:20:44,375 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:20:44,376 - PriceReporter - INFO - ASTERUSDT | Mid-Price: $1.7172 | Bid-Ask Spread: 0.006% | Bid: $1.7172 | Ask: $1.7173 | Balance: $100.00
2025-10-01 11:20:44,841 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:20:44,842 - PriceReporter - INFO - BNBUSDT | Mid-Price: $1030.2500 | Bid-Ask Spread: 0.010% | Bid: $1030.2000 | Ask: $1030.3000 | Balance: $100.00
2025-10-01 11:21:05,824 - UserDataUpdater - WARNING - No user data messages received for 60.0s. Connection may be stale. Reconnecting...
2025-10-01 11:21:06,115 - BalanceKeepalive - INFO - Balance keepalive task cancelled.
2025-10-01 11:21:06,116 - BalanceKeepalive - INFO - Balance keepalive task shutting down
2025-10-01 11:21:06,117 - UserDataUpdater - INFO - Reconnecting to user data WebSocket in 5.0s...
2025-10-01 11:21:06,165 - UserDataUpdater - WARNING - No user data messages received for 60.0s. Connection may be stale. Reconnecting...
2025-10-01 11:21:06,455 - BalanceKeepalive - INFO - Balance keepalive task cancelled.
2025-10-01 11:21:06,456 - BalanceKeepalive - INFO - Balance keepalive task shutting down
2025-10-01 11:21:06,457 - UserDataUpdater - INFO - Reconnecting to user data WebSocket in 5.0s...
2025-10-01 11:21:08,422 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:21:08,775 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:21:09,425 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:21:09,795 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:21:10,427 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:21:10,797 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:21:11,118 - UserDataUpdater - INFO - Getting listen key for user data stream...
2025-10-01 11:21:11,429 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:21:11,459 - UserDataUpdater - INFO - Getting listen key for user data stream...
2025-10-01 11:21:11,709 - UserDataUpdater - INFO - User data listen key obtained: yyNiP3fhVs8SglQI3WeJ...
2025-10-01 11:21:11,710 - UserDataUpdater - INFO - Connecting to user data WebSocket: wss://fstream.asterdex.com/ws/yyNiP3fhVs8SglQI3WeJPdQLila2BMfDLcSAkA7nMt4gFpvCiuVdV5aRtzGz7tUP
2025-10-01 11:21:11,799 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:21:11,880 - UserDataUpdater - INFO - User data listen key obtained: yyNiP3fhVs8SglQI3WeJ...
2025-10-01 11:21:11,880 - UserDataUpdater - INFO - Connecting to user data WebSocket: wss://fstream.asterdex.com/ws/yyNiP3fhVs8SglQI3WeJPdQLila2BMfDLcSAkA7nMt4gFpvCiuVdV5aRtzGz7tUP
2025-10-01 11:21:12,432 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:21:12,801 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=True, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:21:13,097 - UserDataUpdater - INFO - User data WebSocket connected!
2025-10-01 11:21:13,097 - UserDataUpdater - INFO - User data WebSocket connected!
2025-10-01 11:21:14,680 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol ASTERUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol ASTERUSDT from parameter files.
2025-10-01 11:21:14,683 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:21:14,683 - MarketMakerLoop - ERROR - Market data: mid_price=1.71685, bid=1.7168, ask=1.7169
2025-10-01 11:21:14,684 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:21:14,734 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol BNBUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol BNBUSDT from parameter files.
2025-10-01 11:21:14,736 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:21:14,737 - MarketMakerLoop - ERROR - Market data: mid_price=1030.35, bid=1030.3, ask=1030.4
2025-10-01 11:21:14,738 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:21:40,890 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:21:40,891 - PriceReporter - INFO - ASTERUSDT | Mid-Price: $1.7159 | Bid-Ask Spread: 0.006% | Bid: $1.7158 | Ask: $1.7159 | Balance: $100.00
2025-10-01 11:21:41,356 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:21:41,357 - PriceReporter - INFO - BNBUSDT | Mid-Price: $1030.3500 | Bid-Ask Spread: 0.010% | Bid: $1030.3000 | Ask: $1030.4000 | Balance: $100.00
2025-10-01 11:21:44,238 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol ASTERUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol ASTERUSDT from parameter files.
2025-10-01 11:21:44,240 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:21:44,240 - MarketMakerLoop - ERROR - Market data: mid_price=1.7135500000000001, bid=1.7135, ask=1.7136
2025-10-01 11:21:44,241 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:21:44,662 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol BNBUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol BNBUSDT from parameter files.
2025-10-01 11:21:44,664 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:21:44,665 - MarketMakerLoop - ERROR - Market data: mid_price=1030.35, bid=1030.3, ask=1030.4
2025-10-01 11:21:44,665 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:23:42,697 - root - INFO - Starting market maker with arguments: Namespace(symbol='ASTERUSDT')
2025-10-01 11:23:42,697 - root - INFO - FLIP_MODE is set to: False
2025-10-01 11:23:42,701 - root - INFO - Sending initial cancel all orders for ASTERUSDT to ensure a clean slate.
2025-10-01 11:23:43,620 - root - INFO - Fetching initial account balance...
2025-10-01 11:23:43,620 - InitialBalance - INFO - Fetching initial account balance...
2025-10-01 11:23:44,390 - InitialBalance - INFO - Initial USDF balance: 0.0
2025-10-01 11:23:44,391 - InitialBalance - INFO - Initial USDT balance: 0.0
2025-10-01 11:23:44,391 - InitialBalance - INFO - Initial USDC balance: 100.0
2025-10-01 11:23:44,392 - InitialBalance - INFO - Initial balance loaded: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:23:44,408 - SupertrendInitializer - INFO - Initial Supertrend signal confirms default bias: FLIP_MODE -> False
2025-10-01 11:23:44,409 - root - INFO - Checking for existing position for ASTERUSDT...
2025-10-01 11:23:45,210 - root - INFO - No significant existing position found.
2025-10-01 11:23:45,211 - root - INFO - Attempting to set leverage for ASTERUSDT to 1x.
2025-10-01 11:23:45,518 - root - INFO - Successfully set leverage for ASTERUSDT to 1x.
2025-10-01 11:23:45,518 - root - INFO - Starting in default BUY mode.
2025-10-01 11:23:45,519 - MarketMakerLoop - INFO - Fetching trading rules for ASTERUSDT...
2025-10-01 11:23:45,519 - WebSocketPriceUpdater - INFO - Connecting to WebSocket: wss://fstream.asterdex.com/ws/asterusdt@depth5
2025-10-01 11:23:45,527 - UserDataUpdater - INFO - Getting listen key for user data stream...
2025-10-01 11:23:46,009 - UserDataUpdater - INFO - User data listen key obtained: yyNiP3fhVs8SglQI3WeJ...
2025-10-01 11:23:46,013 - UserDataUpdater - INFO - Connecting to user data WebSocket: wss://fstream.asterdex.com/ws/yyNiP3fhVs8SglQI3WeJPdQLila2BMfDLcSAkA7nMt4gFpvCiuVdV5aRtzGz7tUP
2025-10-01 11:23:46,302 - MarketMakerLoop - INFO - Filters loaded: {'price_precision': 4, 'tick_size': 0.0001, 'quantity_precision': 2, 'step_size': 0.01, 'min_notional': 5.0}
2025-10-01 11:23:46,303 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=False, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:23:46,905 - WebSocketPriceUpdater - INFO - WebSocket connected for ASTERUSDT depth stream
2025-10-01 11:23:47,275 - UserDataUpdater - INFO - User data WebSocket connected!
2025-10-01 11:23:48,416 - SpreadLoader - INFO - Loaded spreads for ASTERUSDT from avellaneda_parameters_ASTER.json: buy=0.002634, sell=0.002533
2025-10-01 11:23:48,417 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 11:23:48,417 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=11.60261059, price=1.71920915, reduce_only=False
2025-10-01 11:23:48,417 - MarketMakerLoop - INFO - Adjusted order: price=1.7192, quantity=11.60
2025-10-01 11:23:48,418 - MarketMakerLoop - INFO - Placing BUY order: 11.60 ASTERUSDT @ 1.7192 (-0.2640% from mid-price)
2025-10-01 11:23:48,418 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.7192, quantity=11.60, side=BUY, reduceOnly=False
2025-10-01 11:23:49,182 - MarketMakerLoop - INFO - Order placed successfully: ID=344954183
2025-10-01 11:24:17,352 - MarketMakerLoop - INFO - Order 344954183 not filled within 30s. Cancelling and refreshing.
2025-10-01 11:24:19,354 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 11:24:19,354 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=11.56069364, price=1.72544268, reduce_only=False
2025-10-01 11:24:19,355 - MarketMakerLoop - INFO - Adjusted order: price=1.7254, quantity=11.56
2025-10-01 11:24:19,355 - MarketMakerLoop - INFO - Placing BUY order: 11.56 ASTERUSDT @ 1.7254 (-0.2659% from mid-price)
2025-10-01 11:24:19,355 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.7254, quantity=11.56, side=BUY, reduceOnly=False
2025-10-01 11:24:19,683 - MarketMakerLoop - INFO - Order placed successfully: ID=344969728
2025-10-01 11:24:41,993 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=0.0000, USDC=100.0000, Total=$100.0000
2025-10-01 11:24:41,994 - PriceReporter - INFO - ASTERUSDT | Mid-Price: $1.7293 | Bid-Ask Spread: 0.012% | Bid: $1.7292 | Ask: $1.7294 | Balance: $100.00
2025-10-01 11:24:47,979 - MarketMakerLoop - INFO - Order 344969728 not filled within 30s. Cancelling and refreshing.
2025-10-01 11:24:49,102 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 11:24:49,102 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=11.57239983, price=1.72369729, reduce_only=False
2025-10-01 11:24:49,103 - MarketMakerLoop - INFO - Adjusted order: price=1.7237, quantity=11.57
2025-10-01 11:24:49,103 - MarketMakerLoop - INFO - Placing BUY order: 11.57 ASTERUSDT @ 1.7237 (-0.2633% from mid-price)
2025-10-01 11:24:49,103 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.7237, quantity=11.57, side=BUY, reduceOnly=False
2025-10-01 11:24:49,420 - MarketMakerLoop - INFO - Order placed successfully: ID=344977971
2025-10-01 11:25:06,257 - UserDataUpdater - INFO - Balance updated: USDF=0.0000, USDT=-0.0020, USDC=100.0000, Total=$99.9980
2025-10-01 11:25:06,258 - UserDataUpdater - INFO - Real-time position update for ASTERUSDT: size changed from 0.000000 to 11.570000
2025-10-01 11:25:06,258 - UserDataUpdater - INFO - Position notional from WS ($19.94) is above threshold. Switching to SELL mode.
2025-10-01 11:25:06,259 - MarketMakerLoop - INFO - Order 344977971 reached final state FILLED. Filled: 11.57
2025-10-01 11:25:06,259 - MarketMakerLoop - INFO - Order 344977971 filled! Quantity: 11.57
2025-10-01 11:25:06,260 - MarketMakerLoop - INFO - SELL fill processed: new position size 0.000000
2025-10-01 11:25:06,260 - MarketMakerLoop - INFO - Position below threshold (8.700444), mode change: SELL -> BUY
2025-10-01 11:25:06,709 - MarketMakerLoop - INFO - Found significant position (size: 11.57, notional: $19.95). Switching to SELL mode.
2025-10-01 11:25:06,712 - MarketMakerLoop - INFO - Position size is 11.57. Entering SELL mode.
2025-10-01 11:25:06,713 - MarketMakerLoop - INFO - Calculated order parameters: side=SELL, quantity=11.57000000, price=1.72716389, reduce_only=True
2025-10-01 11:25:06,713 - MarketMakerLoop - INFO - Adjusted order: price=1.7272, quantity=11.57
2025-10-01 11:25:06,714 - MarketMakerLoop - INFO - Cancelling existing order 344977971 to place new order
2025-10-01 11:25:07,022 - MarketMakerLoop - WARNING - Error cancelling existing order: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
2025-10-01 11:25:07,023 - MarketMakerLoop - INFO - Placing SELL order: 11.57 ASTERUSDT @ 1.7272 (+0.2467% from mid-price)
2025-10-01 11:25:07,023 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.7272, quantity=11.57, side=SELL, reduceOnly=True
2025-10-01 11:25:07,336 - MarketMakerLoop - INFO - Order placed successfully: ID=344984192
2025-10-01 11:25:35,612 - MarketMakerLoop - INFO - Order 344984192 not filled within 30s. Cancelling and refreshing.
2025-10-01 11:25:36,372 - MarketMakerLoop - INFO - Position size is 11.57. Entering SELL mode.
2025-10-01 11:25:36,372 - MarketMakerLoop - INFO - Calculated order parameters: side=SELL, quantity=11.57000000, price=1.72415629, reduce_only=True
2025-10-01 11:25:36,372 - MarketMakerLoop - INFO - Adjusted order: price=1.7242, quantity=11.57
2025-10-01 11:25:36,373 - MarketMakerLoop - INFO - Placing SELL order: 11.57 ASTERUSDT @ 1.7242 (+0.2558% from mid-price)
2025-10-01 11:25:36,373 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.7242, quantity=11.57, side=SELL, reduceOnly=True
2025-10-01 11:25:37,152 - MarketMakerLoop - INFO - Order placed successfully: ID=344993748
2025-10-01 11:25:38,538 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=-0.0020, USDC=100.0000, Total=$99.9980
2025-10-01 11:25:38,539 - PriceReporter - INFO - ASTERUSDT | Mid-Price: $1.7212 | Bid-Ask Spread: 0.006% | Bid: $1.7211 | Ask: $1.7212 | Balance: $100.00
2025-10-01 11:26:05,412 - MarketMakerLoop - INFO - Order 344993748 not filled within 30s. Cancelling and refreshing.
2025-10-01 11:26:06,193 - MarketMakerLoop - INFO - Position size is 11.57. Entering SELL mode.
2025-10-01 11:26:06,194 - MarketMakerLoop - INFO - Calculated order parameters: side=SELL, quantity=11.57000000, price=1.72385553, reduce_only=True
2025-10-01 11:26:06,194 - MarketMakerLoop - INFO - Adjusted order: price=1.7239, quantity=11.57
2025-10-01 11:26:06,194 - MarketMakerLoop - INFO - Placing SELL order: 11.57 ASTERUSDT @ 1.7239 (+0.2559% from mid-price)
2025-10-01 11:26:06,195 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.7239, quantity=11.57, side=SELL, reduceOnly=True
2025-10-01 11:26:06,493 - MarketMakerLoop - INFO - Order placed successfully: ID=345001262
2025-10-01 11:26:34,792 - MarketMakerLoop - INFO - Order 345001262 not filled within 30s. Cancelling and refreshing.
2025-10-01 11:26:35,092 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=-0.0020, USDC=100.0000, Total=$99.9980
2025-10-01 11:26:35,093 - PriceReporter - INFO - ASTERUSDT | Mid-Price: $1.7205 | Bid-Ask Spread: 0.006% | Bid: $1.7205 | Ask: $1.7206 | Balance: $100.00
2025-10-01 11:26:36,024 - MarketMakerLoop - INFO - Position size is 11.57. Entering SELL mode.
2025-10-01 11:26:36,024 - MarketMakerLoop - INFO - Calculated order parameters: side=SELL, quantity=11.57000000, price=1.72440693, reduce_only=True
2025-10-01 11:26:36,025 - MarketMakerLoop - INFO - Adjusted order: price=1.7244, quantity=11.57
2025-10-01 11:26:36,025 - MarketMakerLoop - INFO - Placing SELL order: 11.57 ASTERUSDT @ 1.7244 (+0.2529% from mid-price)
2025-10-01 11:26:36,025 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.7244, quantity=11.57, side=SELL, reduceOnly=True
2025-10-01 11:26:36,799 - MarketMakerLoop - INFO - Order placed successfully: ID=345008153
2025-10-01 11:27:05,061 - MarketMakerLoop - INFO - Order 345008153 not filled within 30s. Cancelling and refreshing.
2025-10-01 11:27:06,278 - MarketMakerLoop - INFO - Position size is 11.57. Entering SELL mode.
2025-10-01 11:27:06,279 - MarketMakerLoop - INFO - Calculated order parameters: side=SELL, quantity=11.57000000, price=1.72571022, reduce_only=True
2025-10-01 11:27:06,279 - MarketMakerLoop - INFO - Adjusted order: price=1.7257, quantity=11.57
2025-10-01 11:27:06,279 - MarketMakerLoop - INFO - Placing SELL order: 11.57 ASTERUSDT @ 1.7257 (+0.2527% from mid-price)
2025-10-01 11:27:06,280 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.7257, quantity=11.57, side=SELL, reduceOnly=True
2025-10-01 11:27:06,599 - MarketMakerLoop - INFO - Order placed successfully: ID=345014098
2025-10-01 11:27:27,404 - UserDataUpdater - INFO - Balance updated: USDF=0.0000, USDT=0.0191, USDC=100.0000, Total=$100.0191
2025-10-01 11:27:27,405 - UserDataUpdater - INFO - Real-time position update for ASTERUSDT: size changed from 11.570000 to 0.000000
2025-10-01 11:27:27,405 - UserDataUpdater - INFO - Position notional from WS ($0.00) is below threshold. Switching to BUY mode.
2025-10-01 11:27:27,405 - MarketMakerLoop - INFO - Order 345014098 reached final state FILLED. Filled: 11.57
2025-10-01 11:27:27,406 - MarketMakerLoop - INFO - Order 345014098 filled! Quantity: 11.57
2025-10-01 11:27:27,406 - MarketMakerLoop - INFO - BUY fill processed: new position size 11.570000
2025-10-01 11:27:27,406 - MarketMakerLoop - INFO - Mode change: BUY -> SELL
2025-10-01 11:27:27,904 - MarketMakerLoop - INFO - Position notional ($0.00) is below threshold. Resetting to BUY mode.
2025-10-01 11:27:28,220 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 11:27:28,220 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=11.58601246, price=1.72200177, reduce_only=False
2025-10-01 11:27:28,221 - MarketMakerLoop - INFO - Adjusted order: price=1.7220, quantity=11.58
2025-10-01 11:27:28,222 - MarketMakerLoop - INFO - Cancelling existing order 345014098 to place new order
2025-10-01 11:27:28,533 - MarketMakerLoop - WARNING - Error cancelling existing order: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
2025-10-01 11:27:28,534 - MarketMakerLoop - INFO - Placing BUY order: 11.58 ASTERUSDT @ 1.7220 (-0.2664% from mid-price)
2025-10-01 11:27:28,534 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.7220, quantity=11.58, side=BUY, reduceOnly=False
2025-10-01 11:27:29,307 - MarketMakerLoop - INFO - Order placed successfully: ID=345020343
2025-10-01 11:27:31,606 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=0.0191, USDC=100.0000, Total=$100.0191
2025-10-01 11:27:31,607 - PriceReporter - INFO - ASTERUSDT | Mid-Price: $1.7252 | Bid-Ask Spread: 0.006% | Bid: $1.7252 | Ask: $1.7253 | Balance: $100.02
2025-10-01 11:28:07,533 - root - INFO - Starting market maker with arguments: Namespace(symbol='ASTERUSDT')
2025-10-01 11:28:07,535 - root - INFO - FLIP_MODE is set to: False
2025-10-01 11:28:07,535 - root - INFO - Starting market maker with arguments: Namespace(symbol='HYPEUSDT')
2025-10-01 11:28:07,536 - root - INFO - FLIP_MODE is set to: False
2025-10-01 11:28:07,538 - root - INFO - Sending initial cancel all orders for ASTERUSDT to ensure a clean slate.
2025-10-01 11:28:07,541 - root - INFO - Sending initial cancel all orders for HYPEUSDT to ensure a clean slate.
2025-10-01 11:28:08,481 - root - INFO - Fetching initial account balance...
2025-10-01 11:28:08,482 - InitialBalance - INFO - Fetching initial account balance...
2025-10-01 11:28:08,482 - root - INFO - Fetching initial account balance...
2025-10-01 11:28:08,483 - InitialBalance - INFO - Fetching initial account balance...
2025-10-01 11:28:09,247 - InitialBalance - INFO - Initial USDF balance: 0.0
2025-10-01 11:28:09,247 - InitialBalance - INFO - Initial USDT balance: 0.01914905
2025-10-01 11:28:09,247 - InitialBalance - INFO - Initial USDC balance: 100.0
2025-10-01 11:28:09,248 - InitialBalance - INFO - Initial balance loaded: USDF=0.0000, USDT=0.0191, USDC=100.0000, Total=$100.0191
2025-10-01 11:28:09,251 - SupertrendInitializer - INFO - Initial Supertrend signal confirms default bias: FLIP_MODE -> False
2025-10-01 11:28:09,252 - root - INFO - Checking for existing position for ASTERUSDT...
2025-10-01 11:28:09,260 - InitialBalance - INFO - Initial USDF balance: 0.0
2025-10-01 11:28:09,261 - InitialBalance - INFO - Initial USDT balance: 0.01914905
2025-10-01 11:28:09,261 - InitialBalance - INFO - Initial USDC balance: 100.0
2025-10-01 11:28:09,262 - InitialBalance - INFO - Initial balance loaded: USDF=0.0000, USDT=0.0191, USDC=100.0000, Total=$100.0191
2025-10-01 11:28:09,266 - SupertrendInitializer - INFO - Initial Supertrend signal confirms default bias: FLIP_MODE -> False
2025-10-01 11:28:09,267 - root - INFO - Checking for existing position for HYPEUSDT...
2025-10-01 11:28:09,572 - root - INFO - No significant existing position found.
2025-10-01 11:28:09,572 - root - INFO - No significant existing position found.
2025-10-01 11:28:09,573 - root - INFO - Attempting to set leverage for ASTERUSDT to 2x.
2025-10-01 11:28:09,573 - root - INFO - Attempting to set leverage for HYPEUSDT to 2x.
2025-10-01 11:28:09,892 - root - INFO - Successfully set leverage for HYPEUSDT to 2x.
2025-10-01 11:28:09,892 - root - INFO - Starting in default BUY mode.
2025-10-01 11:28:09,893 - MarketMakerLoop - INFO - Fetching trading rules for HYPEUSDT...
2025-10-01 11:28:09,894 - WebSocketPriceUpdater - INFO - Connecting to WebSocket: wss://fstream.asterdex.com/ws/hypeusdt@depth5
2025-10-01 11:28:09,900 - UserDataUpdater - INFO - Getting listen key for user data stream...
2025-10-01 11:28:10,311 - UserDataUpdater - INFO - User data listen key obtained: yyNiP3fhVs8SglQI3WeJ...
2025-10-01 11:28:10,311 - UserDataUpdater - INFO - Connecting to user data WebSocket: wss://fstream.asterdex.com/ws/yyNiP3fhVs8SglQI3WeJPdQLila2BMfDLcSAkA7nMt4gFpvCiuVdV5aRtzGz7tUP
2025-10-01 11:28:10,353 - root - INFO - Successfully set leverage for ASTERUSDT to 2x.
2025-10-01 11:28:10,353 - root - INFO - Starting in default BUY mode.
2025-10-01 11:28:10,354 - MarketMakerLoop - INFO - Fetching trading rules for ASTERUSDT...
2025-10-01 11:28:10,355 - WebSocketPriceUpdater - INFO - Connecting to WebSocket: wss://fstream.asterdex.com/ws/asterusdt@depth5
2025-10-01 11:28:10,374 - UserDataUpdater - INFO - Getting listen key for user data stream...
2025-10-01 11:28:10,670 - MarketMakerLoop - INFO - Filters loaded: {'price_precision': 3, 'tick_size': 0.001, 'quantity_precision': 2, 'step_size': 0.01, 'min_notional': 5.0}
2025-10-01 11:28:10,671 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=False, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:28:10,872 - UserDataUpdater - INFO - User data listen key obtained: yyNiP3fhVs8SglQI3WeJ...
2025-10-01 11:28:10,872 - UserDataUpdater - INFO - Connecting to user data WebSocket: wss://fstream.asterdex.com/ws/yyNiP3fhVs8SglQI3WeJPdQLila2BMfDLcSAkA7nMt4gFpvCiuVdV5aRtzGz7tUP
2025-10-01 11:28:11,119 - MarketMakerLoop - INFO - Filters loaded: {'price_precision': 4, 'tick_size': 0.0001, 'quantity_precision': 2, 'step_size': 0.01, 'min_notional': 5.0}
2025-10-01 11:28:11,120 - MarketMakerLoop - WARNING - A WebSocket is disconnected (Price_WS_Connected=False, User_Data_WS_Connected=False). Pausing trading logic.
2025-10-01 11:28:11,208 - WebSocketPriceUpdater - INFO - WebSocket connected for HYPEUSDT depth stream
2025-10-01 11:28:11,470 - UserDataUpdater - INFO - User data WebSocket connected!
2025-10-01 11:28:11,561 - WebSocketPriceUpdater - INFO - WebSocket connected for ASTERUSDT depth stream
2025-10-01 11:28:12,029 - UserDataUpdater - INFO - User data WebSocket connected!
2025-10-01 11:28:12,743 - SpreadLoader - INFO - Loaded spreads for ASTERUSDT from avellaneda_parameters_ASTER.json: buy=0.002634, sell=0.002533
2025-10-01 11:28:12,744 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 11:28:12,744 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=28.98013764, price=1.72110414, reduce_only=False
2025-10-01 11:28:12,744 - MarketMakerLoop - INFO - Adjusted order: price=1.7211, quantity=28.98
2025-10-01 11:28:12,745 - MarketMakerLoop - INFO - Placing BUY order: 28.98 ASTERUSDT @ 1.7211 (-0.2637% from mid-price)
2025-10-01 11:28:12,745 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.7211, quantity=28.98, side=BUY, reduceOnly=False
2025-10-01 11:28:12,786 - SpreadLoader - WARNING - delta_b spread 2.583820 from /app/params/avellaneda_parameters_HYPE.json is out of bounds; expected between 0.000050 and 0.020000.
2025-10-01 11:28:12,786 - SpreadLoader - WARNING - delta_a spread 2.583820 from /app/params/avellaneda_parameters_HYPE.json is out of bounds; expected between 0.000050 and 0.020000.
2025-10-01 11:28:12,787 - SpreadLoader - WARNING - No usable spreads found in /app/params/avellaneda_parameters_HYPE.json; checking next candidate if available.
2025-10-01 11:28:12,787 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol HYPEUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol HYPEUSDT from parameter files.
2025-10-01 11:28:12,791 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:28:12,792 - MarketMakerLoop - ERROR - Market data: mid_price=47.183499999999995, bid=47.183, ask=47.184
2025-10-01 11:28:12,792 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:28:13,065 - MarketMakerLoop - INFO - Order placed successfully: ID=345031101
2025-10-01 11:28:41,344 - MarketMakerLoop - INFO - Order 345031101 not filled within 30s. Cancelling and refreshing.
2025-10-01 11:28:42,354 - SpreadLoader - WARNING - delta_b spread 2.583820 from /app/params/avellaneda_parameters_HYPE.json is out of bounds; expected between 0.000050 and 0.020000.
2025-10-01 11:28:42,354 - SpreadLoader - WARNING - delta_a spread 2.583820 from /app/params/avellaneda_parameters_HYPE.json is out of bounds; expected between 0.000050 and 0.020000.
2025-10-01 11:28:42,355 - SpreadLoader - WARNING - No usable spreads found in /app/params/avellaneda_parameters_HYPE.json; checking next candidate if available.
2025-10-01 11:28:42,355 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol HYPEUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol HYPEUSDT from parameter files.
2025-10-01 11:28:42,356 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:28:42,357 - MarketMakerLoop - ERROR - Market data: mid_price=47.1605, bid=47.16, ask=47.161
2025-10-01 11:28:42,357 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:28:42,923 - MarketMakerLoop - INFO - No significant position. Entering BUY mode.
2025-10-01 11:28:42,924 - MarketMakerLoop - INFO - Calculated order parameters: side=BUY, quantity=29.01713106, price=1.71890994, reduce_only=False
2025-10-01 11:28:42,924 - MarketMakerLoop - INFO - Adjusted order: price=1.7189, quantity=29.01
2025-10-01 11:28:42,924 - MarketMakerLoop - INFO - Placing BUY order: 29.01 ASTERUSDT @ 1.7189 (-0.2640% from mid-price)
2025-10-01 11:28:42,925 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.7189, quantity=29.01, side=BUY, reduceOnly=False
2025-10-01 11:28:43,227 - MarketMakerLoop - INFO - Order placed successfully: ID=345037113
2025-10-01 11:28:48,018 - UserDataUpdater - INFO - Balance updated: USDF=0.0000, USDT=0.0142, USDC=100.0000, Total=$100.0142
2025-10-01 11:28:48,019 - UserDataUpdater - INFO - Real-time position update for ASTERUSDT: size changed from 0.000000 to 29.010000
2025-10-01 11:28:48,019 - UserDataUpdater - INFO - Position notional from WS ($49.87) is above threshold. Switching to SELL mode.
2025-10-01 11:28:48,019 - MarketMakerLoop - INFO - Order 345037113 reached final state FILLED. Filled: 29.01
2025-10-01 11:28:48,020 - MarketMakerLoop - INFO - Order 345037113 filled! Quantity: 29.01
2025-10-01 11:28:48,020 - MarketMakerLoop - INFO - SELL fill processed: new position size 0.000000
2025-10-01 11:28:48,020 - MarketMakerLoop - INFO - Position below threshold (8.726257), mode change: SELL -> BUY
2025-10-01 11:28:48,054 - UserDataUpdater - INFO - Balance updated: USDF=0.0000, USDT=0.0142, USDC=100.0000, Total=$100.0142
2025-10-01 11:28:48,803 - MarketMakerLoop - INFO - Found significant position (size: 29.01, notional: $50.02). Switching to SELL mode.
2025-10-01 11:28:48,804 - MarketMakerLoop - INFO - Position size is 29.01. Entering SELL mode.
2025-10-01 11:28:48,806 - MarketMakerLoop - INFO - Calculated order parameters: side=SELL, quantity=29.01000000, price=1.72310363, reduce_only=True
2025-10-01 11:28:48,807 - MarketMakerLoop - INFO - Adjusted order: price=1.7231, quantity=29.01
2025-10-01 11:28:48,808 - MarketMakerLoop - INFO - Cancelling existing order 345037113 to place new order
2025-10-01 11:28:49,128 - MarketMakerLoop - WARNING - Error cancelling existing order: 400, message='Bad Request', url='https://fapi.asterdex.com/fapi/v3/order'
2025-10-01 11:28:49,129 - MarketMakerLoop - INFO - Placing SELL order: 29.01 ASTERUSDT @ 1.7231 (+0.2618% from mid-price)
2025-10-01 11:28:49,129 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.7231, quantity=29.01, side=SELL, reduceOnly=True
2025-10-01 11:28:49,899 - MarketMakerLoop - INFO - Order placed successfully: ID=345039555
2025-10-01 11:29:06,410 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=0.0142, USDC=100.0000, Total=$100.0142
2025-10-01 11:29:06,411 - PriceReporter - INFO - HYPEUSDT | Mid-Price: $47.1655 | Bid-Ask Spread: 0.002% | Bid: $47.1650 | Ask: $47.1660 | Balance: $100.01
2025-10-01 11:29:06,885 - BalanceReporter - INFO - Account Balance: USDF=0.0000, USDT=0.0142, USDC=100.0000, Total=$100.0142
2025-10-01 11:29:06,886 - PriceReporter - INFO - ASTERUSDT | Mid-Price: $1.7176 | Bid-Ask Spread: 0.029% | Bid: $1.7174 | Ask: $1.7179 | Balance: $100.01
2025-10-01 11:29:11,772 - SpreadLoader - WARNING - delta_b spread 2.583820 from /app/params/avellaneda_parameters_HYPE.json is out of bounds; expected between 0.000050 and 0.020000.
2025-10-01 11:29:11,773 - SpreadLoader - WARNING - delta_a spread 2.583820 from /app/params/avellaneda_parameters_HYPE.json is out of bounds; expected between 0.000050 and 0.020000.
2025-10-01 11:29:11,773 - SpreadLoader - WARNING - No usable spreads found in /app/params/avellaneda_parameters_HYPE.json; checking next candidate if available.
2025-10-01 11:29:11,773 - MarketMakerLoop - ERROR - An error occurred in the main loop: Could not load valid spreads for symbol HYPEUSDT from parameter files.
Traceback (most recent call last):
  File "/app/market_maker.py", line 824, in market_making_loop
    buy_spread, sell_spread = get_spreads(state)
                              ^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 698, in get_spreads
    return _get_spreads_for_symbol(symbol)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/market_maker.py", line 642, in _get_spreads_for_symbol
    raise ValueError(f"Could not load valid spreads for symbol {symbol_key} from parameter files.")
ValueError: Could not load valid spreads for symbol HYPEUSDT from parameter files.
2025-10-01 11:29:11,797 - MarketMakerLoop - ERROR - Current state: mode=BUY, position_size=0.0, active_order_id=None
2025-10-01 11:29:11,797 - MarketMakerLoop - ERROR - Market data: mid_price=47.173500000000004, bid=47.173, ask=47.174
2025-10-01 11:29:11,798 - MarketMakerLoop - INFO - Waiting for 30 seconds before retrying...
2025-10-01 11:29:18,130 - MarketMakerLoop - INFO - Order 345039555 not filled within 30s. Cancelling and refreshing.
2025-10-01 11:29:19,335 - MarketMakerLoop - INFO - Position size is 29.01. Entering SELL mode.
2025-10-01 11:29:19,335 - MarketMakerLoop - INFO - Calculated order parameters: side=SELL, quantity=29.01000000, price=1.72270262, reduce_only=True
2025-10-01 11:29:19,336 - MarketMakerLoop - INFO - Adjusted order: price=1.7227, quantity=29.01
2025-10-01 11:29:19,336 - MarketMakerLoop - INFO - Placing SELL order: 29.01 ASTERUSDT @ 1.7227 (+0.2531% from mid-price)
2025-10-01 11:29:19,336 - MarketMakerLoop - INFO - Order details: symbol=ASTERUSDT, price=1.7227, quantity=29.01, side=SELL, reduceOnly=True
2025-10-01 11:29:19,645 - MarketMakerLoop - INFO - Order placed successfully: ID=345048174
